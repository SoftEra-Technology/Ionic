{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{\"8wZ6\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class CloseAuditPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),ionic_angular_ngfactory=__webpack_require__(\"MKJQ\"),ionic_angular=__webpack_require__(\"sZkV\"),common=__webpack_require__(\"SVse\"),ngx=__webpack_require__(\"6GXZ\"),Store=__webpack_require__(\"9mtz\"),user_login_service=__webpack_require__(\"kwUn\"),screen_orientation_ngx=__webpack_require__(\"b6o4\");class close_audit_page_CloseAuditPage{constructor(platform,sqlite,userService,router,screenOrientation){this.platform=platform,this.sqlite=sqlite,this.userService=userService,this.router=router,this.screenOrientation=screenOrientation,this.database_name=\"AUDIT_DB.db\",this.store=new Store.a,this.platform.ready().then(()=>{this.createDB(),this.setLandscape()}).catch(error=>{console.log(error)})}setLandscape(){this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE)}createDB(){console.log(\"database created\"),this.sqlite.create({name:this.database_name,location:\"default\"}).then(db=>{this.databaseObj=db,this.getRows()}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}getRows(){this.databaseObj.executeSql(\"SELECT * FROM USER_TB\",[]).then(res=>{if(this.row_data=[],res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.row_data.push(res.rows.item(i)),console.log(this.row_data[i].EMP_ID.toString());this.fetchAttemptedOpenAuditByUser(this.row_data[0].EMP_ID.toString())}}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}fetchAttemptedOpenAuditByUser(_sUserId){this.databaseObj.executeSql(\"SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='\"+_sUserId+\"' AND AUDIT_STATUS='Open'\",[]).then(res=>{if(this.AttemptedOpenAuditByUser=[],console.log(res),res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedOpenAuditByUser.push(res.rows.item(i));return this.AttemptedOpenAuditByUser}}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}GoToDashboard(){this.router.navigate([\"dash-board\"])}ngOnInit(){}deletAttemptedAuditById(attemtedId){this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_RECIVING_QUESTIONS WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_OPTION WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_IMAGES_TB WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_TB\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_SECTION\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM QUESTION_STANDARD_PREDEFINED_TB\",[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}}var fesm2015_router=__webpack_require__(\"iInd\"),RenderType_CloseAuditPage=core.ob({encapsulation:0,styles:[[\"\"]],data:{}});function View_CloseAuditPage_1(_l){return core.Kb(0,[(_l()(),core.qb(0,0,null,null,14,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,13,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(2,0,null,null,12,\"ion-item\",[],null,null,null,ionic_angular_ngfactory.D,ionic_angular_ngfactory.j)),core.pb(3,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],null,null),(_l()(),core.qb(4,0,null,0,0,\"img\",[[\"height\",\"25\"],[\"src\",\"../../assets/red_lock_48.png\"],[\"width\",\"25\"]],null,null,null,null,null)),(_l()(),core.Ib(5,0,[\" Audit: \",\"   \",\" \"])),(_l()(),core.qb(6,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.Ib(7,0,[\" Audit Performed On: \",\" Total Marks \",\" Marks Scored \",\" \"])),(_l()(),core.qb(8,0,null,0,4,\"ion-note\",[[\"color\",\"tertiary\"],[\"slot\",\"end\"]],null,null,null,ionic_angular_ngfactory.G,ionic_angular_ngfactory.m)),core.pb(9,49152,null,0,ionic_angular.S,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.qb(10,0,null,0,2,\"ion-button\",[[\"color\",\"medium\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.deletAttemptedAuditById(_v.context.$implicit.ATTEMPTED_ID)&&ad),ad}),ionic_angular_ngfactory.v,ionic_angular_ngfactory.b)),core.pb(11,49152,null,0,ionic_angular.h,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.Ib(-1,0,[\"Delete\"])),(_l()(),core.qb(13,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(14,0,null,0,0,\"br\",[],null,null,null,null,null))],(function(_ck,_v){_ck(_v,9,0,\"tertiary\"),_ck(_v,11,0,\"medium\")}),(function(_ck,_v){_ck(_v,5,0,_v.context.$implicit.AUDIT_NAME,_v.context.$implicit.STR_NAME),_ck(_v,7,0,_v.context.$implicit.AUDIT_DT,_v.context.$implicit.AUDIT_POINTS,_v.context.$implicit.MARKS_SCORED)}))}function View_CloseAuditPage_0(_l){return core.Kb(0,[(_l()(),core.qb(0,0,null,null,13,\"ion-header\",[],null,null,null,ionic_angular_ngfactory.B,ionic_angular_ngfactory.h)),core.pb(1,49152,null,0,ionic_angular.y,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,11,\"div\",[[\"style\",\"background-color: black; align-content: center;\"]],null,null,null,null,null)),(_l()(),core.qb(3,0,null,null,10,\"table\",[[\"style\",\"margin-left: 10px; margin-top: 5px; margin-bottom: 2px;\"]],null,null,null,null,null)),(_l()(),core.qb(4,0,null,null,9,\"tbody\",[],null,null,null,null,null)),(_l()(),core.qb(5,0,null,null,8,\"tr\",[],null,null,null,null,null)),(_l()(),core.qb(6,0,null,null,2,\"td\",[],null,null,null,null,null)),(_l()(),core.qb(7,0,null,null,1,\"span\",[[\"style\",\"margin-top:20px; margin-left: 5px; margin-top: 1px;\"]],null,null,null,null,null)),(_l()(),core.qb(8,0,null,null,0,\"img\",[[\"height\",\"35\"],[\"src\",\"../../assets/tablez.png\"],[\"width\",\"35\"]],null,null,null,null,null)),(_l()(),core.qb(9,0,null,null,1,\"td\",[],null,null,null,null,null)),(_l()(),core.Ib(-1,null,[\" \"])),(_l()(),core.qb(11,0,null,null,2,\"td\",[],null,null,null,null,null)),(_l()(),core.qb(12,0,null,null,1,\"span\",[[\"style\",\"color: white; margin-top: 1px;\"]],null,null,null,null,null)),(_l()(),core.Ib(-1,null,[\"Close Audit\"])),(_l()(),core.qb(14,0,null,null,3,\"ion-content\",[],null,null,null,ionic_angular_ngfactory.x,ionic_angular_ngfactory.d)),core.pb(15,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.fb(16777216,null,0,1,null,View_CloseAuditPage_1)),core.pb(17,278528,null,0,common.i,[core.L,core.I,core.q],{ngForOf:[0,\"ngForOf\"]},null),(_l()(),core.qb(18,0,null,null,17,\"ion-footer\",[[\"class\",\"ion-no-border\"]],null,null,null,ionic_angular_ngfactory.z,ionic_angular_ngfactory.f)),core.pb(19,49152,null,0,ionic_angular.w,[core.h,core.k,core.x],null,null),(_l()(),core.qb(20,0,null,0,15,\"ion-grid\",[],null,null,null,ionic_angular_ngfactory.A,ionic_angular_ngfactory.g)),core.pb(21,49152,null,0,ionic_angular.x,[core.h,core.k,core.x],null,null),(_l()(),core.qb(22,0,null,0,13,\"ion-row\",[],null,null,null,ionic_angular_ngfactory.J,ionic_angular_ngfactory.p)),core.pb(23,49152,null,0,ionic_angular.db,[core.h,core.k,core.x],null,null),(_l()(),core.qb(24,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.w,ionic_angular_ngfactory.c)),core.pb(25,49152,null,0,ionic_angular.q,[core.h,core.k,core.x],null,null),(_l()(),core.qb(26,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(27,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.GoToDashboard()&&ad),ad}),ionic_angular_ngfactory.v,ionic_angular_ngfactory.b)),core.pb(28,49152,null,0,ionic_angular.h,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.Ib(-1,0,[\"Exit\"])),(_l()(),core.qb(30,0,null,0,2,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.w,ionic_angular_ngfactory.c)),core.pb(31,49152,null,0,ionic_angular.q,[core.h,core.k,core.x],null,null),(_l()(),core.qb(32,0,null,0,0,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(33,0,null,0,2,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.w,ionic_angular_ngfactory.c)),core.pb(34,49152,null,0,ionic_angular.q,[core.h,core.k,core.x],null,null),(_l()(),core.qb(35,0,null,0,0,\"div\",[],null,null,null,null,null))],(function(_ck,_v){_ck(_v,17,0,_v.component.AttemptedOpenAuditByUser),_ck(_v,28,0,\"medium\")}),null)}function View_CloseAuditPage_Host_0(_l){return core.Kb(0,[(_l()(),core.qb(0,0,null,null,1,\"app-close-audit\",[],null,null,null,View_CloseAuditPage_0,RenderType_CloseAuditPage)),core.pb(1,114688,null,0,close_audit_page_CloseAuditPage,[ionic_angular.Db,ngx.a,user_login_service.a,fesm2015_router.m,screen_orientation_ngx.a],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var CloseAuditPageNgFactory=core.mb(\"app-close-audit\",close_audit_page_CloseAuditPage,View_CloseAuditPage_Host_0,{},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\");class CloseAuditPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"CloseAuditPageModuleNgFactory\",(function(){return CloseAuditPageModuleNgFactory}));var CloseAuditPageModuleNgFactory=core.nb(CloseAuditPageModule,[],(function(_l){return core.zb([core.Ab(512,core.j,core.Y,[[8,[router_ngfactory.a,CloseAuditPageNgFactory]],[3,core.j],core.v]),core.Ab(4608,common.l,common.k,[core.s,[2,common.s]]),core.Ab(4608,fesm2015_forms.o,fesm2015_forms.o,[]),core.Ab(4608,ionic_angular.a,ionic_angular.a,[core.x,core.g]),core.Ab(4608,ionic_angular.Ab,ionic_angular.Ab,[ionic_angular.a,core.j,core.p]),core.Ab(4608,ionic_angular.Eb,ionic_angular.Eb,[ionic_angular.a,core.j,core.p]),core.Ab(1073742336,common.b,common.b,[]),core.Ab(1073742336,fesm2015_forms.n,fesm2015_forms.n,[]),core.Ab(1073742336,fesm2015_forms.g,fesm2015_forms.g,[]),core.Ab(1073742336,ionic_angular.yb,ionic_angular.yb,[]),core.Ab(1073742336,fesm2015_router.n,fesm2015_router.n,[[2,fesm2015_router.s],[2,fesm2015_router.m]]),core.Ab(1073742336,CloseAuditPageRoutingModule,CloseAuditPageRoutingModule,[]),core.Ab(1073742336,CloseAuditPageModule,CloseAuditPageModule,[]),core.Ab(1024,fesm2015_router.k,(function(){return[[{path:\"\",component:close_audit_page_CloseAuditPage}]]}),[])])}))}}]);","extractedComments":[]}