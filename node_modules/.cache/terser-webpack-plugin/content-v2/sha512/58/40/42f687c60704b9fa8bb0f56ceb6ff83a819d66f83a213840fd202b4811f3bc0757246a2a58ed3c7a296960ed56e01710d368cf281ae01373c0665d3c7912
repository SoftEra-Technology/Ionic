{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{\"8wZ6\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class CloseAuditPageModule{}var ionic_angular_ngfactory=__webpack_require__(\"MKJQ\"),ionic_angular=__webpack_require__(\"sZkV\"),fesm2015_forms=__webpack_require__(\"s7LF\");class UnitManager{}class unit_manager_login_page_UnitManagerLoginPage{constructor(navParams,modalController){this.navParams=navParams,this.modalController=modalController,this.UMobject=new UnitManager,this.comment_um=this.navParams.get(\"comment\"),this.UMId=this.navParams.get(\"UMId\"),this.PASS=this.navParams.get(\"PASS\")}ngOnInit(){}save_Comment(){this.dismiss()}close_Comment(){this.dismiss()}dismiss(){let UMobject1=new UnitManager;UMobject1.UMId=this.UMId,UMobject1.UMPASS=this.PASS,UMobject1.UComment=this.comment_um,this.modalController.dismiss(UMobject1)}}var RenderType_UnitManagerLoginPage=core.ob({encapsulation:0,styles:[[\"\"]],data:{}});function View_UnitManagerLoginPage_0(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,40,\"ion-content\",[],null,null,null,ionic_angular_ngfactory.z,ionic_angular_ngfactory.e)),core.pb(1,49152,null,0,ionic_angular.s,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(3,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(4,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(5,0,null,0,18,\"div\",[[\"style\",\"margin-left:35px; margin-right: 35px;\"]],null,null,null,null,null)),(_l()(),core.qb(6,0,null,null,7,\"div\",[[\"style\",\"border: 1px solid black;\"]],null,null,null,null,null)),(_l()(),core.qb(7,0,null,null,6,\"ion-input\",[[\"placeholder\",\"Unit Manager Id\"],[\"type\",\"text\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,8)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,8)._handleInputEvent($event.target)&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.UMId=$event)&&ad),ad}),ionic_angular_ngfactory.E,ionic_angular_ngfactory.j)),core.pb(8,16384,null,0,ionic_angular.Jb,[core.k],null,null),core.Eb(1024,null,fesm2015_forms.h,(function(p0_0){return[p0_0]}),[ionic_angular.Jb]),core.pb(10,671744,null,0,fesm2015_forms.l,[[8,null],[8,null],[8,null],[6,fesm2015_forms.h]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Eb(2048,null,fesm2015_forms.i,null,[fesm2015_forms.l]),core.pb(12,16384,null,0,fesm2015_forms.j,[[4,fesm2015_forms.i]],null,null),core.pb(13,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],{placeholder:[0,\"placeholder\"],type:[1,\"type\"]},null),(_l()(),core.qb(14,0,null,null,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(15,0,null,null,7,\"div\",[[\"style\",\"border: 1px solid black;\"]],null,null,null,null,null)),(_l()(),core.qb(16,0,null,null,6,\"ion-input\",[[\"placeholder\",\"Password\"],[\"type\",\"Password\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,17)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,17)._handleInputEvent($event.target)&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.PASS=$event)&&ad),ad}),ionic_angular_ngfactory.E,ionic_angular_ngfactory.j)),core.pb(17,16384,null,0,ionic_angular.Jb,[core.k],null,null),core.Eb(1024,null,fesm2015_forms.h,(function(p0_0){return[p0_0]}),[ionic_angular.Jb]),core.pb(19,671744,null,0,fesm2015_forms.l,[[8,null],[8,null],[8,null],[6,fesm2015_forms.h]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Eb(2048,null,fesm2015_forms.i,null,[fesm2015_forms.l]),core.pb(21,16384,null,0,fesm2015_forms.j,[[4,fesm2015_forms.i]],null,null),core.pb(22,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],{placeholder:[0,\"placeholder\"],type:[1,\"type\"]},null),(_l()(),core.qb(23,0,null,null,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(24,0,null,0,1,\"div\",[[\"style\",\"margin-left: 8px; margin-right: 8px;\"]],null,null,null,null,null)),(_l()(),core.Hb(-1,null,[\"Comment\"])),(_l()(),core.qb(26,0,null,0,7,\"div\",[[\"style\",\"border-style: double; margin-left: 8px; margin-right: 8px;\"]],null,null,null,null,null)),(_l()(),core.qb(27,0,null,null,6,\"ion-textarea\",[[\"cols\",\"25\"],[\"rows\",\"6\"],[\"style\",\"background-color: whitesmoke;\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,28)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,28)._handleInputEvent($event.target)&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.comment_um=$event)&&ad),ad}),ionic_angular_ngfactory.P,ionic_angular_ngfactory.u)),core.pb(28,16384,null,0,ionic_angular.Jb,[core.k],null,null),core.Eb(1024,null,fesm2015_forms.h,(function(p0_0){return[p0_0]}),[ionic_angular.Jb]),core.pb(30,671744,null,0,fesm2015_forms.l,[[8,null],[8,null],[8,null],[6,fesm2015_forms.h]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Eb(2048,null,fesm2015_forms.i,null,[fesm2015_forms.l]),core.pb(32,16384,null,0,fesm2015_forms.j,[[4,fesm2015_forms.i]],null,null),core.pb(33,49152,null,0,ionic_angular.tb,[core.h,core.k,core.x],{cols:[0,\"cols\"],rows:[1,\"rows\"]},null),(_l()(),core.qb(34,0,null,0,6,\"div\",[[\"style\",\"margin-left: 8px; margin-right: 8px;\"]],null,null,null,null,null)),(_l()(),core.qb(35,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.close_Comment()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(36,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.Hb(-1,0,[\"Exit\"])),(_l()(),core.qb(38,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.save_Comment()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(39,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.Hb(-1,0,[\"Push\"]))],(function(_ck,_v){var _co=_v.component;_ck(_v,10,0,_co.UMId),_ck(_v,13,0,\"Unit Manager Id\",\"text\"),_ck(_v,19,0,_co.PASS),_ck(_v,22,0,\"Password\",\"Password\"),_ck(_v,30,0,_co.comment_um),_ck(_v,33,0,\"25\",\"6\"),_ck(_v,36,0,\"medium\"),_ck(_v,39,0,\"medium\")}),(function(_ck,_v){_ck(_v,7,0,core.Cb(_v,12).ngClassUntouched,core.Cb(_v,12).ngClassTouched,core.Cb(_v,12).ngClassPristine,core.Cb(_v,12).ngClassDirty,core.Cb(_v,12).ngClassValid,core.Cb(_v,12).ngClassInvalid,core.Cb(_v,12).ngClassPending),_ck(_v,16,0,core.Cb(_v,21).ngClassUntouched,core.Cb(_v,21).ngClassTouched,core.Cb(_v,21).ngClassPristine,core.Cb(_v,21).ngClassDirty,core.Cb(_v,21).ngClassValid,core.Cb(_v,21).ngClassInvalid,core.Cb(_v,21).ngClassPending),_ck(_v,27,0,core.Cb(_v,32).ngClassUntouched,core.Cb(_v,32).ngClassTouched,core.Cb(_v,32).ngClassPristine,core.Cb(_v,32).ngClassDirty,core.Cb(_v,32).ngClassValid,core.Cb(_v,32).ngClassInvalid,core.Cb(_v,32).ngClassPending)}))}function View_UnitManagerLoginPage_Host_0(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,1,\"app-unit-manager-login\",[],null,null,null,View_UnitManagerLoginPage_0,RenderType_UnitManagerLoginPage)),core.pb(1,114688,null,0,unit_manager_login_page_UnitManagerLoginPage,[ionic_angular.Eb,ionic_angular.Cb],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var UnitManagerLoginPageNgFactory=core.mb(\"app-unit-manager-login\",unit_manager_login_page_UnitManagerLoginPage,View_UnitManagerLoginPage_Host_0,{},{},[]),question_comment_page_ngfactory=__webpack_require__(\"4XKt\"),router_ngfactory=__webpack_require__(\"pMnS\"),common=__webpack_require__(\"SVse\"),tslib_es6=__webpack_require__(\"mrSG\"),ngx=__webpack_require__(\"6GXZ\"),Store=__webpack_require__(\"9mtz\"),user_login_service=__webpack_require__(\"kwUn\"),camera_ngx=__webpack_require__(\"Pn9U\"),question_comment_page=__webpack_require__(\"Hle8\"),loader_service_service=__webpack_require__(\"u9AK\"),screen_orientation_ngx=__webpack_require__(\"b6o4\");class SavedAudit{}class SavedQuestion{}class FilledChoice{}const delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));class close_audit_page_CloseAuditPage{constructor(platform,sqlite,userService,router,camera,modalController,screenOrientation,ionLoader){this.platform=platform,this.sqlite=sqlite,this.userService=userService,this.router=router,this.camera=camera,this.modalController=modalController,this.screenOrientation=screenOrientation,this.ionLoader=ionLoader,this.database_name=\"AUDIT_DB.db\",this.savedQuestions_array=[],this.ObjUM=new UnitManager,this.image=\"\",this.Question_comment=\"\",this.AttemptedClosedAuditByUser=[],this.AttemptedClosedAudit=[],this.AttemptedClosedAuditSection=[],this.AttemptedClosedAuditSectionQuestion=[],this.AttemptedClosedAuditSectionQuestionAnswer=[],this.unit_managerid=\"\",this.unit_managerPass=\"\",this.unit_managerComment=\"\",this.filledChoices1=[],this.store=new Store.a,this.platform.ready().then(()=>{this.createDB(),this.setLandscape()}).catch(error=>{console.log(error)})}showLoader(){this.ionLoader.showLoader(),setTimeout(()=>{this.hideLoader()},328e3)}hideLoader(){this.ionLoader.hideLoader(),window.location.reload()}openCam(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(imageData=>{this.imageData=imageData,this.image=window.Ionic.WebView.convertFileSrc(imageData)},err=>{console.log(\"error \"+JSON.stringify(err))})}upload(){const imageName=(new Date).valueOf()+\".jpeg\",imageBlob=this.dataURItoBlob(this.imageData),imageFile=new File([imageBlob],imageName,{type:\"image/jpeg\"});(new FormData).append(\"file\",imageFile)}dataURItoBlob(dataURI){const byteString=window.atob(dataURI),arrayBuffer=new ArrayBuffer(byteString.length),int8Array=new Uint8Array(arrayBuffer);for(let i=0;i<byteString.length;i++)int8Array[i]=byteString.charCodeAt(i);return new Blob([int8Array],{type:\"image/jpeg\"})}Add_Comment(){return tslib_es6.a(this,void 0,void 0,(function*(){const modal=yield this.modalController.create({component:question_comment_page.a,componentProps:{comment:this.Question_comment}});return modal.onDidDismiss().then(data=>{console.log(\"data from model popup in close Audit\"),console.log(data);const popup_data1=data.data;console.log(popup_data1),this.Question_comment=popup_data1}),yield modal.present()}))}OenAudit_Page_setting(lAttemptedId,lAuditId,lStoreId){this.objecta=\"\",this.objecta={AttemptedId:lAttemptedId,AuditId:lAuditId,Storeid:lStoreId}}GoToAuditList(){this.router.navigate([\"/list-audit\"],{queryParams:{value:JSON.stringify(this.objecta)}})}setLandscape(){this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE)}createDB(){console.log(\"database created\"),this.sqlite.create({name:this.database_name,location:\"default\"}).then(db=>{this.databaseObj=db,this.getRows()}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}getRows(){this.databaseObj.executeSql(\"SELECT * FROM USER_TB\",[]).then(res=>{if(this.row_data=[],res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.row_data.push(res.rows.item(i)),console.log(this.row_data[i].EMP_ID.toString());this.fetchAttemptedOpenAuditByUser(this.row_data[0].EMP_ID.toString())}}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}fetchAttemptedOpenAuditByUser(_sUserId){this.databaseObj.executeSql(\"SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='\"+_sUserId+\"' AND AUDIT_STATUS='Close'\",[]).then(res=>{if(this.AttemptedOpenAuditByUser=[],console.log(res),res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedOpenAuditByUser.push(res.rows.item(i));return this.AttemptedOpenAuditByUser}}).catch(e=>{alert(\"error \"+JSON.stringify(e))})}GoToDashboard(){this.router.navigate([\"/dash-board\"],{queryParams:{value:\"refresh\"}})}ngOnInit(){}PushAudit(){return tslib_es6.a(this,void 0,void 0,(function*(){if(null==this.objecta)return alert(\"Please Select One Audit\"),!1;{const modal=yield this.modalController.create({component:unit_manager_login_page_UnitManagerLoginPage,componentProps:{comment:this.unit_managerComment,UMId:this.unit_managerid,PASS:this.unit_managerPass}});return modal.onDidDismiss().then(data=>{console.log(\"data from model popup in close Audit for Unit Manager\"),console.log(data);const popup_data1=data.data;console.log(popup_data1),this.ObjUM=popup_data1,this.unit_managerid=this.ObjUM.UMId,this.unit_managerPass=this.ObjUM.UMPASS,this.unit_managerComment=this.ObjUM.UComment,console.log(this.unit_managerid),\"\"==this.unit_managerid||\"\"==this.unit_managerPass?alert(\"Please Enter Unit Manager Id And PassWord\"):this.PushAudit_server(this.unit_managerid,this.unit_managerPass,this.unit_managerComment)}),yield modal.present()}}))}PushAudit_server(unit_managerid,unit_managerPass,unit_managerComment){return tslib_es6.a(this,void 0,void 0,(function*(){this.showLoader(),this.savedAudit=new SavedAudit,this.databaseObj.executeSql(\"SELECT AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID=\"+this.objecta.AttemptedId+\" AND AUDIT_ID=\"+this.objecta.AuditId,[]).then(res=>{if(this.AttemptedClosedAudit=[],res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedClosedAudit.push(res.rows.item(i));console.log(\"Audit\"),this.savedAudit._auditId=Number(this.AttemptedClosedAudit[0].AUDIT_ID),this.savedAudit._strCode=String(this.AttemptedClosedAudit[0].STR_CODE),this.savedAudit._auditor=String(this.AttemptedClosedAudit[0].USER_ID),this.savedAudit._stroreManager=String(this.AttemptedClosedAudit[0].STR_MANAGER);let Auditdd=String(this.AttemptedClosedAudit[0].AUDIT_DT).slice(0,10).split(\"-\");this.savedAudit._auditDt=Auditdd[2]+\"/\"+Auditdd[1]+\"/\"+Auditdd[0],this.savedAudit._uniqueId=String(this.AttemptedClosedAudit[0].UNIQUE_ID),this.savedAudit._isValid=\"yes\",this.savedAudit._status=\"Closed\",this.savedAudit._umId=unit_managerid,this.savedAudit._umPwd=unit_managerPass,this.savedAudit._auditeeComment=\"Auditee Comment\",this.savedAudit._auditorComment=\"Auditror Comment\",this.savedAudit._auditFindings=\"Audit Findings\",this.GetClosedSection(),console.log(this.savedAudit)}}).catch(e=>{console.log(\"error \"+JSON.stringify(e))})}))}GetClosedSection(){let lAttemptedId=this.objecta.AttemptedId,lAuditId=this.objecta.AuditId;this.databaseObj.executeSql(\"SELECT SECTION_ID, SECTION_NAME, SECTION_ORDER FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID=\"+lAttemptedId+\" AND AUDIT_ID=\"+lAuditId,[]).then(res=>tslib_es6.a(this,void 0,void 0,(function*(){if(this.AttemptedClosedAuditSection=[],res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedClosedAuditSection.push(res.rows.item(i));for(console.log(\"Audit section\"),this.savedQuestions_array=[],i=0;i<this.AttemptedClosedAuditSection.length;i++)yield this.GetClosedSeectionQuestion(Number(lAttemptedId),Number(lAuditId),Number(this.AttemptedClosedAuditSection[i].SECTION_ID),String(this.AttemptedClosedAuditSection[i].SECTION_NAME),Number(this.AttemptedClosedAuditSection[i].SECTION_ORDER));for(this.savedAudit._lstQuestion=this.savedQuestions_array,i=0;i<this.savedAudit._lstQuestion.length;i++)yield this.GetClosedSeectionQuestionAnswer(Number(lAttemptedId),Number(lAuditId),Number(this.savedAudit._lstQuestion[i]._questionId)),this.savedAudit._lstQuestion[i]._lstChoice=this.filledChoices1;console.log(\"object of audit aaaaaaaaaaa\"),console.log(JSON.stringify(this.savedAudit)),console.log(this.savedAudit),this.userService.Post_Close_Audit(this.savedAudit).subscribe(response=>{1==response.StatusFl?(alert(\"Audit Uploded\"),this.deletAttemptedAuditById(Number(lAttemptedId)),this.ionLoader.hideLoader(),window.location.reload()):(alert(response.Msg),this.ionLoader.hideLoader())})}}))).catch(e=>{console.log(\"error \"+JSON.stringify(e))})}GetClosedSeectionQuestion(lAttemptedId,lAuditId,lId,SECTION_NAME,SECTION_ORDER){return tslib_es6.a(this,void 0,void 0,(function*(){return this.databaseObj.executeSql(\"SELECT QUESTION_ID,QUESTION_NAME,QUESTION_ORDER,QUESTION_TYPE_ID,QUESTION_TYPE,QUESTION_COMMENT,IMAGE_NAME FROM AUDIT_ATTEMPTED_QUESTIONS  WHERE  ATTEMPTED_ID=\"+lAttemptedId+\" AND AUDIT_ID=\"+lAuditId+\" AND SECTION_ID=\"+lId,[]).then(res=>tslib_es6.a(this,void 0,void 0,(function*(){if(this.AttemptedClosedAuditSectionQuestion=[],res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedClosedAuditSectionQuestion.push(res.rows.item(i));for(console.log(\"Question\"),i=0;i<this.AttemptedClosedAuditSectionQuestion.length;i++){var question=new SavedQuestion;question._sectionId=lId,question._sectionNm=SECTION_NAME,question._sectionOrder=SECTION_ORDER,question._questionId=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_ID),question._questionNm=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_NAME,question._questionOrder=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_ORDER),question._questionTypeId=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_TYPE_ID),question._questionType=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_TYPE,question._imgString=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_COMMENT,question._attachedImage=this.AttemptedClosedAuditSectionQuestion[i].IMAGE_NAME,question._questionAns=\"aks\",this.savedQuestions_array.push(question),console.log(\"Question Answer obj\"),console.log(this.savedQuestions_array)}}}))).catch(e=>{console.log(\"error \"+JSON.stringify(e))}),yield delay(5e3),console.log(\"done!\"),10}))}GetClosedSeectionQuestionAnswer(lAttemptedId,lAuditId,lQuestionId){return tslib_es6.a(this,void 0,void 0,(function*(){return this.databaseObj.executeSql(\"SELECT A.ATTEMPTED_ID,A.AUDIT_ID,A.SECTION_ID,A.QUESTION_ID,A.CHOICE_ID,A.CHOICE_TEXT,A.POINTS,A.COMMENTS,A.CHOICE_VALUE,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE A INNER JOIN AUDIT_ATTEMPTED_QUESTIONS B ON A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.QUESTION_ID=B.QUESTION_ID WHERE A.ATTEMPTED_ID=\"+lAttemptedId+\" AND A.AUDIT_ID=\"+lAuditId+\" AND A.QUESTION_ID=\"+lQuestionId,[]).then(res=>{if(this.AttemptedClosedAuditSectionQuestionAnswer=[],console.log(res),res.rows.length>0){for(var i=0;i<res.rows.length;i++)this.AttemptedClosedAuditSectionQuestionAnswer.push(res.rows.item(i));for(console.log(\"Question Answer\"),console.log(this.AttemptedClosedAuditSectionQuestionAnswer),this.filledChoices1=[],i=0;i<this.AttemptedClosedAuditSectionQuestionAnswer.length;i++){var fildcho=new FilledChoice;fildcho.Choice=this.AttemptedClosedAuditSectionQuestionAnswer[i].CHOICE_TEXT,fildcho.ChoiceId=Number(this.AttemptedClosedAuditSectionQuestionAnswer[i].CHOICE_ID),fildcho.Marks=Number(this.AttemptedClosedAuditSectionQuestionAnswer[i].POINTS),fildcho.Comments=\"Akshay\",fildcho.Value=this.AttemptedClosedAuditSectionQuestionAnswer[i].CHOICE_VALUE,this.filledChoices1.push(fildcho)}}}).catch(e=>{console.log(\"error \"+JSON.stringify(e))}),console.log(\"this might take some time....\"),yield delay(5e3),console.log(\"done!\"),10}))}deletAttemptedAuditById(attemtedId){return tslib_es6.a(this,void 0,void 0,(function*(){return this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_RECIVING_QUESTIONS WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_OPTION WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_IMAGES_TB WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),this.databaseObj.executeSql(\"DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED WHERE ATTEMPTED_ID=\"+attemtedId,[]).then(res=>{console.log(res)}).catch(e=>{alert(\"error \"+JSON.stringify(e))}),yield delay(5e3),console.log(\"done!\"),10}))}}var fesm2015_router=__webpack_require__(\"iInd\"),RenderType_CloseAuditPage=core.ob({encapsulation:0,styles:[[\"\"]],data:{}});function View_CloseAuditPage_2(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,1,\"span\",[],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,0,\"img\",[[\"height\",\"40\"],[\"src\",\"../../assets/red_lock_48.png\"],[\"width\",\"50\"]],null,null,null,null,null))],null,null)}function View_CloseAuditPage_3(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,1,\"span\",[],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,0,\"img\",[[\"height\",\"40\"],[\"src\",\"../../assets/refresh1.jpg\"],[\"width\",\"50\"]],null,null,null,null,null))],null,null)}function View_CloseAuditPage_1(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,25,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,24,\"ion-item\",[],null,null,null,ionic_angular_ngfactory.F,ionic_angular_ngfactory.k)),core.pb(2,49152,null,0,ionic_angular.F,[core.h,core.k,core.x],null,null),(_l()(),core.qb(3,0,null,0,14,\"table\",[],null,null,null,null,null)),(_l()(),core.qb(4,0,null,null,13,\"tbody\",[],null,null,null,null,null)),(_l()(),core.qb(5,0,null,null,8,\"tr\",[],null,null,null,null,null)),(_l()(),core.qb(6,0,null,null,4,\"td\",[[\"align\",\"center\"],[\"rowspan\",\"2\"],[\"width\",\"5%\"]],null,null,null,null,null)),(_l()(),core.fb(16777216,null,null,1,null,View_CloseAuditPage_2)),core.pb(8,16384,null,0,common.i,[core.L,core.I],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.fb(16777216,null,null,1,null,View_CloseAuditPage_3)),core.pb(10,16384,null,0,common.i,[core.L,core.I],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.qb(11,0,null,null,2,\"td\",[[\"align\",\"left\"],[\"style\",\"font-size:x-large;\"],[\"width\",\"90%\"]],null,null,null,null,null)),(_l()(),core.qb(12,0,null,null,1,\"b\",[],null,null,null,null,null)),(_l()(),core.Hb(13,null,[\" Audit: \",\" \",\"\"])),(_l()(),core.qb(14,0,null,null,3,\"tr\",[],null,null,null,null,null)),(_l()(),core.qb(15,0,null,null,2,\"td\",[[\"align\",\"left\"]],null,null,null,null,null)),(_l()(),core.Hb(16,null,[\"   Audit Performed On: \",\" Total Marks: \",\" Marks Scored: \",\" \"])),core.Db(0,common.n,[]),(_l()(),core.qb(18,0,null,0,7,\"ion-note\",[[\"color\",\"tertiary\"],[\"slot\",\"end\"]],null,null,null,ionic_angular_ngfactory.I,ionic_angular_ngfactory.n)),core.pb(19,49152,null,0,ionic_angular.T,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.qb(20,0,null,0,5,\"ion-button\",[[\"color\",\"medium\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.OenAudit_Page_setting(_v.context.$implicit.ATTEMPTED_ID,_v.context.$implicit.AUDIT_ID,_v.context.$implicit.STR_CODE)&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(21,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"]},null),(_l()(),core.qb(22,0,null,0,3,\"ion-checkbox\",[[\"color\",\"dark\"]],null,[[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,25)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,25)._handleIonChange($event.target)&&ad),ad}),ionic_angular_ngfactory.x,ionic_angular_ngfactory.c)),core.Eb(5120,null,fesm2015_forms.h,(function(p0_0){return[p0_0]}),[ionic_angular.b]),core.pb(24,49152,null,0,ionic_angular.p,[core.h,core.k,core.x],{color:[0,\"color\"]},null),core.pb(25,16384,null,0,ionic_angular.b,[core.k],null,null)],(function(_ck,_v){_ck(_v,8,0,0===_v.context.$implicit.MARKS_SCORED),_ck(_v,10,0,_v.context.$implicit.MARKS_SCORED>0),_ck(_v,19,0,\"tertiary\"),_ck(_v,21,0,\"medium\"),_ck(_v,24,0,\"dark\")}),(function(_ck,_v){_ck(_v,13,0,_v.context.$implicit.AUDIT_NAME,_v.context.$implicit.STR_NAME),_ck(_v,16,0,core.Ib(_v,16,0,core.Cb(_v,17).transform(_v.context.$implicit.AUDIT_DT,0,10)),_v.context.$implicit.AUDIT_POINTS,_v.context.$implicit.MARKS_SCORED)}))}function View_CloseAuditPage_0(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,13,\"ion-header\",[],null,null,null,ionic_angular_ngfactory.D,ionic_angular_ngfactory.i)),core.pb(1,49152,null,0,ionic_angular.z,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,11,\"div\",[[\"style\",\"background-color: black; align-content: center;\"]],null,null,null,null,null)),(_l()(),core.qb(3,0,null,null,10,\"table\",[[\"style\",\"margin-left: 10px; margin-top: 5px; margin-bottom: 2px;\"]],null,null,null,null,null)),(_l()(),core.qb(4,0,null,null,9,\"tbody\",[],null,null,null,null,null)),(_l()(),core.qb(5,0,null,null,8,\"tr\",[],null,null,null,null,null)),(_l()(),core.qb(6,0,null,null,2,\"td\",[],null,null,null,null,null)),(_l()(),core.qb(7,0,null,null,1,\"span\",[[\"style\",\"margin-top:20px; margin-left: 5px; margin-top: 1px;\"]],null,null,null,null,null)),(_l()(),core.qb(8,0,null,null,0,\"img\",[[\"height\",\"35\"],[\"src\",\"../../assets/tablez.png\"],[\"width\",\"35\"]],null,null,null,null,null)),(_l()(),core.qb(9,0,null,null,1,\"td\",[],null,null,null,null,null)),(_l()(),core.Hb(-1,null,[\" \"])),(_l()(),core.qb(11,0,null,null,2,\"td\",[],null,null,null,null,null)),(_l()(),core.qb(12,0,null,null,1,\"span\",[[\"style\",\"color: white; margin-top: 1px;\"]],null,null,null,null,null)),(_l()(),core.Hb(-1,null,[\"Compleated Audit\"])),(_l()(),core.qb(14,0,null,null,3,\"ion-content\",[],null,null,null,ionic_angular_ngfactory.z,ionic_angular_ngfactory.e)),core.pb(15,49152,null,0,ionic_angular.s,[core.h,core.k,core.x],null,null),(_l()(),core.fb(16777216,null,0,1,null,View_CloseAuditPage_1)),core.pb(17,278528,null,0,common.h,[core.L,core.I,core.q],{ngForOf:[0,\"ngForOf\"]},null),(_l()(),core.qb(18,0,null,null,35,\"ion-footer\",[[\"class\",\"ion-no-border\"]],null,null,null,ionic_angular_ngfactory.B,ionic_angular_ngfactory.g)),core.pb(19,49152,null,0,ionic_angular.x,[core.h,core.k,core.x],null,null),(_l()(),core.qb(20,0,null,0,33,\"ion-grid\",[],null,null,null,ionic_angular_ngfactory.C,ionic_angular_ngfactory.h)),core.pb(21,49152,null,0,ionic_angular.y,[core.h,core.k,core.x],null,null),(_l()(),core.qb(22,0,null,0,31,\"ion-row\",[],null,null,null,ionic_angular_ngfactory.L,ionic_angular_ngfactory.q)),core.pb(23,49152,null,0,ionic_angular.eb,[core.h,core.k,core.x],null,null),(_l()(),core.qb(24,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.y,ionic_angular_ngfactory.d)),core.pb(25,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.qb(26,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(27,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"],[\"expand\",\"full\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.Add_Comment()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(28,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(_l()(),core.Hb(-1,0,[\"Audit Findings\"])),(_l()(),core.qb(30,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.y,ionic_angular_ngfactory.d)),core.pb(31,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.qb(32,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(33,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"],[\"expand\",\"full\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.openCam()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(34,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(_l()(),core.Hb(-1,0,[\"Attach Image\"])),(_l()(),core.qb(36,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.y,ionic_angular_ngfactory.d)),core.pb(37,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.qb(38,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(39,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"],[\"expand\",\"full\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.PushAudit()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(40,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(_l()(),core.Hb(-1,0,[\"Push\"])),(_l()(),core.qb(42,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.y,ionic_angular_ngfactory.d)),core.pb(43,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.qb(44,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(45,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"],[\"expand\",\"full\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.GoToAuditList()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(46,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(_l()(),core.Hb(-1,0,[\"Open\"])),(_l()(),core.qb(48,0,null,0,5,\"ion-col\",[],null,null,null,ionic_angular_ngfactory.y,ionic_angular_ngfactory.d)),core.pb(49,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],null,null),(_l()(),core.qb(50,0,null,0,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(51,0,null,null,2,\"ion-button\",[[\"color\",\"medium\"],[\"expand\",\"full\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.GoToDashboard()&&ad),ad}),ionic_angular_ngfactory.w,ionic_angular_ngfactory.b)),core.pb(52,49152,null,0,ionic_angular.i,[core.h,core.k,core.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(_l()(),core.Hb(-1,0,[\"Exit\"]))],(function(_ck,_v){_ck(_v,17,0,_v.component.AttemptedOpenAuditByUser),_ck(_v,28,0,\"medium\",\"full\"),_ck(_v,34,0,\"medium\",\"full\"),_ck(_v,40,0,\"medium\",\"full\"),_ck(_v,46,0,\"medium\",\"full\"),_ck(_v,52,0,\"medium\",\"full\")}),null)}function View_CloseAuditPage_Host_0(_l){return core.Jb(0,[(_l()(),core.qb(0,0,null,null,1,\"app-close-audit\",[],null,null,null,View_CloseAuditPage_0,RenderType_CloseAuditPage)),core.pb(1,114688,null,0,close_audit_page_CloseAuditPage,[ionic_angular.Fb,ngx.a,user_login_service.a,fesm2015_router.m,camera_ngx.a,ionic_angular.Cb,screen_orientation_ngx.a,loader_service_service.a],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var CloseAuditPageNgFactory=core.mb(\"app-close-audit\",close_audit_page_CloseAuditPage,View_CloseAuditPage_Host_0,{},{},[]);class UnitManagerLoginPageModule{}var question_comment_module=__webpack_require__(\"zjAK\");class CloseAuditPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"CloseAuditPageModuleNgFactory\",(function(){return CloseAuditPageModuleNgFactory}));var CloseAuditPageModuleNgFactory=core.nb(CloseAuditPageModule,[],(function(_l){return core.zb([core.Ab(512,core.j,core.Y,[[8,[UnitManagerLoginPageNgFactory,question_comment_page_ngfactory.a,router_ngfactory.a,CloseAuditPageNgFactory]],[3,core.j],core.v]),core.Ab(4608,common.k,common.j,[core.s,[2,common.r]]),core.Ab(4608,fesm2015_forms.o,fesm2015_forms.o,[]),core.Ab(4608,ionic_angular.a,ionic_angular.a,[core.x,core.g]),core.Ab(4608,ionic_angular.Cb,ionic_angular.Cb,[ionic_angular.a,core.j,core.p]),core.Ab(4608,ionic_angular.Gb,ionic_angular.Gb,[ionic_angular.a,core.j,core.p]),core.Ab(1073742336,common.b,common.b,[]),core.Ab(1073742336,fesm2015_forms.n,fesm2015_forms.n,[]),core.Ab(1073742336,fesm2015_forms.g,fesm2015_forms.g,[]),core.Ab(1073742336,ionic_angular.zb,ionic_angular.zb,[]),core.Ab(1073742336,UnitManagerLoginPageModule,UnitManagerLoginPageModule,[]),core.Ab(1073742336,question_comment_module.a,question_comment_module.a,[]),core.Ab(1073742336,fesm2015_router.n,fesm2015_router.n,[[2,fesm2015_router.s],[2,fesm2015_router.m]]),core.Ab(1073742336,CloseAuditPageRoutingModule,CloseAuditPageRoutingModule,[]),core.Ab(1073742336,CloseAuditPageModule,CloseAuditPageModule,[]),core.Ab(1024,fesm2015_router.k,(function(){return[[{path:\"\",component:close_audit_page_CloseAuditPage}]]}),[])])}))}}]);","extractedComments":[]}