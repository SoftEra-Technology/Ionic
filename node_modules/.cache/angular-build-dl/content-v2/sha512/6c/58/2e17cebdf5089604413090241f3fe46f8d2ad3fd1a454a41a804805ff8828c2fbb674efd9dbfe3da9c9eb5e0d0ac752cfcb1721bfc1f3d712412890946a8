(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8wZ6":function(l,n,t){"use strict";t.r(n);var u=t("8Y7J");class e{}var T=t("pMnS"),E=t("MKJQ"),r=t("sZkV"),a=t("SVse"),o=t("6GXZ"),s=t("9mtz"),D=t("kwUn");class i{constructor(l,n,t,u){this.platform=l,this.sqlite=n,this.userService=t,this.router=u,this.database_name="AUDIT_DB.db",this.store=new s.a,this.platform.ready().then(()=>{this.createDB()}).catch(l=>{console.log(l)})}createDB(){console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then(l=>{this.databaseObj=l,this.getRows()}).catch(l=>{alert("error "+JSON.stringify(l))})}getRows(){this.databaseObj.executeSql("SELECT * FROM USER_TB",[]).then(l=>{if(this.row_data=[],l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.row_data.push(l.rows.item(n)),console.log(this.row_data[n].EMP_ID.toString());this.fetchAttemptedOpenAuditByUser(this.row_data[0].EMP_ID.toString())}}).catch(l=>{alert("error "+JSON.stringify(l))})}fetchAttemptedOpenAuditByUser(l){this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='"+l+"' AND AUDIT_STATUS='Open'",[]).then(l=>{if(this.AttemptedOpenAuditByUser=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.AttemptedOpenAuditByUser.push(l.rows.item(n));return this.AttemptedOpenAuditByUser}}).catch(l=>{alert("error "+JSON.stringify(l))})}GoToDashboard(){this.router.navigate(["dash-board"])}ngOnInit(){}deletAttemptedAuditById(l){this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_RECIVING_QUESTIONS WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_OPTION WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_IMAGES_TB WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_TB",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_SECTION",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM QUESTION_STANDARD_PREDEFINED_TB",[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))})}}var c=t("iInd"),A=u.ob({encapsulation:0,styles:[[""]],data:{}});function b(l){return u.Hb(0,[(l()(),u.qb(0,0,null,null,33,"div",[],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,32,"div",[],null,null,null,null,null)),(l()(),u.qb(2,0,null,null,31,"ion-item",[],null,null,null,E.w,E.h)),u.pb(3,49152,null,0,r.E,[u.h,u.k,u.x],null,null),(l()(),u.qb(4,0,null,0,29,"table",[],null,null,null,null,null)),(l()(),u.qb(5,0,null,null,28,"tbody",[],null,null,null,null,null)),(l()(),u.qb(6,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),u.qb(7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.qb(8,0,null,null,0,"img",[["height","25"],["src","../../assets/red_lock_48.png"],["width","25"]],null,null,null,null,null)),(l()(),u.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(10,null,[" Audit: ",""])),(l()(),u.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),u.qb(12,0,null,null,1,"div",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.deletAttemptedAuditById(l.context.$implicit.ATTEMPTED_ID)&&u),u}),null,null)),(l()(),u.Gb(-1,null,["Delete"])),(l()(),u.qb(14,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.qb(15,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(16,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(17,null,[""," "])),(l()(),u.qb(18,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(19,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.qb(20,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(21,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(22,null,["Audit Performed On: "," "])),(l()(),u.qb(23,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(24,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.qb(25,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(26,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(27,null,["Total Marks "," "])),(l()(),u.qb(28,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(29,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),u.qb(30,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),u.qb(31,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(32,null,["Marks Scored "," "])),(l()(),u.qb(33,0,null,null,0,"td",[],null,null,null,null,null))],null,(function(l,n){l(n,10,0,n.context.$implicit.AUDIT_NAME),l(n,17,0,n.context.$implicit.STR_NAME),l(n,22,0,n.context.$implicit.AUDIT_DT),l(n,27,0,n.context.$implicit.AUDIT_POINTS),l(n,32,0,n.context.$implicit.MARKS_SCORED)}))}function S(l){return u.Hb(0,[(l()(),u.qb(0,0,null,null,13,"ion-header",[],null,null,null,E.u,E.f)),u.pb(1,49152,null,0,r.y,[u.h,u.k,u.x],null,null),(l()(),u.qb(2,0,null,0,11,"div",[["style","background-color: black; align-content: center;"]],null,null,null,null,null)),(l()(),u.qb(3,0,null,null,10,"table",[["style","margin-left: 10px; margin-top: 5px; margin-bottom: 2px;"]],null,null,null,null,null)),(l()(),u.qb(4,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),u.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),u.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),u.qb(7,0,null,null,1,"span",[["style","margin-top:20px; margin-left: 5px; margin-top: 1px;"]],null,null,null,null,null)),(l()(),u.qb(8,0,null,null,0,"img",[["height","35"],["src","../../assets/tablez.png"],["width","35"]],null,null,null,null,null)),(l()(),u.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u.Gb(-1,null,["\xa0"])),(l()(),u.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),u.qb(12,0,null,null,1,"span",[["style","color: white; margin-top: 1px;"]],null,null,null,null,null)),(l()(),u.Gb(-1,null,["Close Audit"])),(l()(),u.qb(14,0,null,null,5,"ion-content",[],null,null,null,E.r,E.c)),u.pb(15,49152,null,0,r.r,[u.h,u.k,u.x],null,null),(l()(),u.fb(16777216,null,0,1,null,b)),u.pb(17,278528,null,0,a.h,[u.L,u.I,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.qb(18,0,null,0,1,"div",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.GoToDashboard()&&u),u}),null,null)),(l()(),u.Gb(-1,null,["Back To DashBoard"]))],(function(l,n){l(n,17,0,n.component.AttemptedOpenAuditByUser)}),null)}function _(l){return u.Hb(0,[(l()(),u.qb(0,0,null,null,1,"app-close-audit",[],null,null,null,S,A)),u.pb(1,114688,null,0,i,[r.Cb,o.a,D.a,c.m],null,null)],(function(l,n){l(n,1,0)}),null)}var O=u.mb("app-close-audit",i,_,{},{},[]),I=t("s7LF");class h{}t.d(n,"CloseAuditPageModuleNgFactory",(function(){return d}));var d=u.nb(e,[],(function(l){return u.zb([u.Ab(512,u.j,u.Y,[[8,[T.a,O]],[3,u.j],u.v]),u.Ab(4608,a.k,a.j,[u.s,[2,a.q]]),u.Ab(4608,I.n,I.n,[]),u.Ab(4608,r.a,r.a,[u.x,u.g]),u.Ab(4608,r.Ab,r.Ab,[r.a,u.j,u.p]),u.Ab(4608,r.Db,r.Db,[r.a,u.j,u.p]),u.Ab(1073742336,a.b,a.b,[]),u.Ab(1073742336,I.m,I.m,[]),u.Ab(1073742336,I.g,I.g,[]),u.Ab(1073742336,r.yb,r.yb,[]),u.Ab(1073742336,c.n,c.n,[[2,c.s],[2,c.m]]),u.Ab(1073742336,h,h,[]),u.Ab(1073742336,e,e,[]),u.Ab(1024,c.k,(function(){return[[{path:"",component:i}]]}),[])])}))}}]);