function _defineProperties(l,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,e.key,e)}}function _createClass(l,n,t){return n&&_defineProperties(l.prototype,n),t&&_defineProperties(l,t),l}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+plB":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),u=function l(){_classCallCheck(this,l)},T=t("pMnS"),E=t("MKJQ"),i=t("sZkV"),o=t("SVse"),A=t("6GXZ"),I=t("xoVG"),D=t("kwUn"),S=function(){function l(n,t,e,u,T,E){var i=this;_classCallCheck(this,l),this.userService=n,this.router=t,this.network=e,this.platform=u,this.sqlite=T,this.activatedRoute=E,this.database_name="AUDIT_DB.db",this.show_Section=!1,this.show_Question=-1,this.myImgUrl="../../assets/red_lock_48.png",this.activatedRoute.queryParams.subscribe((function(l){console.log(JSON.parse(l.value)),i.Query_data=JSON.parse(l.value),console.log("list page"),console.log(i.Query_data.AttemptedId)})),this.platform.ready().then((function(){i.createDB()})).catch((function(l){console.log(l)}))}return _createClass(l,[{key:"GotoQuestionChoice",value:function(l,n,t){this.router.navigate(["/audit-choice-question"],{queryParams:{value:JSON.stringify({AttemptedId:l,AuditId:this.Query_data.AuditId,SectionId:n,QuestionID:t,Store_id:this.AuditStore})}})}},{key:"ngOnInit",value:function(){}},{key:"createDB",value:function(){var l=this;console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then((function(n){l.databaseObj=n,l.fetchAttemptedAuditForStore(Number(l.Query_data.AuditId),String(l.Query_data.Storeid)),l.fetchAttemptedSection(Number(l.Query_data.AttemptedId),Number(l.Query_data.AuditId))})).catch((function(l){alert("error "+JSON.stringify(l))}))}},{key:"fetchAttemptedAuditForStore",value:function(l,n){var t=this;this.databaseObj.executeSql("SELECT * from AUDIT_ATTEMPTED_TB where AUDIT_ID="+l+" AND STR_CODE='"+n+"' ORDER BY ATTEMPTED_ID DESC",[]).then((function(l){if(t.AttemptedAuditForStore=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)t.AttemptedAuditForStore.push(l.rows.item(n));console.log("look for audit date"),console.log(t.AttemptedAuditForStore),t.AuditStore=t.AttemptedAuditForStore[0].STR_NAME,t.AuditDate=t.AttemptedAuditForStore[0].AUDIT_DT}})).catch((function(l){console.log("error "+JSON.stringify(l))}))}},{key:"fetchAttemptedSection",value:function(l,n){var t=this;this.databaseObj.executeSql("SELECT B.SECTION_NAME AS P_SECTION_NAME,A.ATTEMPTED_ID,A.AUDIT_ID,A.SECTION_ID,A.PARENT_SECTION_ID,A.SECTION_NAME,A.SECTION_DESC,A.SECTION_ORDER,A.SECTION_PT,A.T_QUESTION_COUNT,((SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND AUDIT_ID=A.AUDIT_ID AND SECTION_ID=A.SECTION_ID AND QUESTION_STATUS<>'Open')+(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND AUDIT_ID=A.AUDIT_ID AND QUESTION_STATUS<>'Open' AND SECTION_ID IN(SELECT SECTION_ID FROM AUDIT_ATTEMPTED_SECTION WHERE PARENT_SECTION_ID=A.SECTION_ID))) AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND SECTION_ID=A.SECTION_ID AND IS_INCLUDED='Yes') AS SECTION_MARKS,(IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND SECTION_ID=A.SECTION_ID AND IS_INCLUDED='Yes'),0)+IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND IS_INCLUDED='Yes' AND SECTION_ID IN(SELECT SECTION_ID FROM AUDIT_ATTEMPTED_SECTION WHERE PARENT_SECTION_ID=A.SECTION_ID)),0)) AS MARKS_SCORED FROM AUDIT_ATTEMPTED_SECTION A LEFT JOIN AUDIT_ATTEMPTED_SECTION B ON A.PARENT_SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID=B.ATTEMPTED_ID WHERE A.ATTEMPTED_ID="+l+" AND A.S_QUESTION_COUNT>0",[]).then((function(l){if(t.AttemptedSection=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)t.AttemptedSection.push(l.rows.item(n));console.log("section akshay"),console.log(t.AttemptedSection)}})).catch((function(l){console.log("error "+JSON.stringify(l))}))}},{key:"fetchAttemptedAuditBySQL",value:function(l,n){var t=this;this.databaseObj.executeSql("SELECT AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+l+" AND AUDIT_ID="+n,[]).then((function(l){if(t.AttemptedAuditBySQL=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)t.AttemptedAuditBySQL.push(l.rows.item(n));return t.AttemptedAuditBySQL}})).catch((function(l){alert("error "+JSON.stringify(l))}))}},{key:"fetchAttemptedSectionQuestionBySQL",value:function(l,n,t,e){var u=this;if("Audit"==l?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+n+" AND A.AUDIT_ID="+t,[]).then((function(l){if(u.AttemptedSectionQuestionBySQL=[],console.log(l),l.rows.length>0)for(var n=0;n<l.rows.length;n++)u.AttemptedSectionQuestionBySQL.push(l.rows.item(n))})).catch((function(l){alert("error "+JSON.stringify(l))})):"Section"==l?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+n+" AND A.AUDIT_ID="+t+" AND A.SECTION_ID="+e,[]).then((function(l){if(u.AttemptedSectionQuestionBySQL=[],console.log(l),l.rows.length>0)for(var n=0;n<l.rows.length;n++)u.AttemptedSectionQuestionBySQL.push(l.rows.item(n))})).catch((function(l){alert("error "+JSON.stringify(l))})):"Question"==l?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+n+" AND A.AUDIT_ID="+t+" AND B.QUESTION_ID="+e,[]).then((function(l){if(u.AttemptedSectionQuestionBySQL=[],console.log(l),l.rows.length>0)for(var n=0;n<l.rows.length;n++)u.AttemptedSectionQuestionBySQL.push(l.rows.item(n))})).catch((function(l){alert("error "+JSON.stringify(l))})):this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+n+" AND A.AUDIT_ID="+t+" AND 1=2",[]).then((function(l){if(u.AttemptedSectionQuestionBySQL=[],console.log(l),l.rows.length>0)for(var n=0;n<l.rows.length;n++)u.AttemptedSectionQuestionBySQL.push(l.rows.item(n))})).catch((function(l){alert("error "+JSON.stringify(l))})),this.AttemptedSectionQuestionBySQL.length>0)return this.AttemptedSectionQuestionBySQL}},{key:"fetchAttemptedQuestionBySQL",value:function(l,n,t){var e=this;this.show_Question=this.show_Question===t?-1:t,console.log(l),console.log("Entered in fetched question"),this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,SECTION_ID,QUESTION_ID,QUESTION_NAME,QUESTION_TYPE,QUESTION_TYPE_ID,QUESTION_ORDER,CASE WHEN IS_INCLUDED='Yes' THEN QUESTION_MARKS ELSE 0 END AS QUESTION_MARKS,MARKS_SCORED,QUESTION_STATUS,QUESTION_COMMENT,IS_INCLUDED,IS_CRITICAL FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID="+l+" AND AUDIT_ID="+n+" AND SECTION_ID="+t+" ORDER BY QUESTION_ORDER",[]).then((function(l){if(e.AttemptedQuestionBySQL=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)e.AttemptedQuestionBySQL.push(l.rows.item(n));return e.AttemptedQuestionBySQL}})).catch((function(l){alert("error "+JSON.stringify(l))}))}}]),l}(),_=t("iInd"),r=e.ob({encapsulation:0,styles:[[""]],data:{}});function c(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,10,"div",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.fetchAttemptedSection(l.context.$implicit.ATTEMPTED_ID,l.context.$implicit.AUDIT_ID)&&e),e}),null,null)),(l()(),e.qb(2,0,null,null,9,"ion-item",[],null,null,null,E.C,E.j)),e.pb(3,49152,null,0,i.E,[e.h,e.k,e.x],null,null),(l()(),e.qb(4,0,null,0,7,"table",[],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,6,"tbody",[],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,0,"img",[["height","25"],["src","../../assets/tablez.png"],["width","25"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Gb(10,null,[" Audit: ",""])),(l()(),e.qb(11,0,null,null,0,"td",[],null,null,null,null,null))],null,(function(l,n){l(n,10,0,n.context.$implicit.AUDIT_NAME)}))}function s(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,6,"div",[["style","margin-left: 20px;"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,5,"ion-item",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.GotoQuestionChoice(l.context.$implicit.ATTEMPTED_ID,l.parent.parent.context.$implicit.SECTION_ID,l.context.$implicit.QUESTION_ID)&&e),e}),E.C,E.j)),e.pb(3,49152,null,0,i.E,[e.h,e.k,e.x],null,null),(l()(),e.qb(4,0,null,0,0,"img",[["height","25"],["src","../../assets/red_lock_48.png"],["width","25"]],null,null,null,null,null)),(l()(),e.Gb(5,0,["",""])),(l()(),e.qb(6,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Gb(7,0,[" Marks : "," \xa0\xa0\xa0 Scored(%): "," "]))],null,(function(l,n){l(n,5,0,n.context.$implicit.QUESTION_NAME),l(n,7,0,n.context.$implicit.QUESTION_MARKS,n.context.$implicit.MARKS_SCORED)}))}function N(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.fb(16777216,null,null,1,null,s)),e.pb(2,278528,null,0,o.h,[e.L,e.I,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.AttemptedQuestionBySQL)}),null)}function a(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,8,"div",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.fetchAttemptedQuestionBySQL(l.context.$implicit.ATTEMPTED_ID,l.context.$implicit.AUDIT_ID,l.context.$implicit.SECTION_ID)&&e),e}),null,null)),(l()(),e.qb(2,0,null,null,5,"ion-item",[],null,null,null,E.C,E.j)),e.pb(3,49152,null,0,i.E,[e.h,e.k,e.x],null,null),(l()(),e.qb(4,0,null,0,0,"img",[["height","25"],["src","../../assets/red_lock_48.png"],["width","25"]],null,null,null,null,null)),(l()(),e.Gb(5,0,[" Section: ","\xa0 \xa0",""])),(l()(),e.qb(6,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Gb(7,0,[" ",", Total Questions: "," Question Answered: "," Markes Scored(%): "," "])),(l()(),e.fb(16777216,null,null,1,null,N)),e.pb(9,16384,null,0,o.i,[e.L,e.I],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,9,0,n.component.show_Question===n.context.$implicit.SECTION_ID)}),(function(l,n){var t=n.component;l(n,5,0,n.context.$implicit.SECTION_NAME,t.AuditStore),l(n,7,0,t.AuditDate,n.context.$implicit.T_QUESTION_COUNT,n.context.$implicit.ATTEMPTQUESTION,n.context.$implicit.MARKS_SCORED)}))}function O(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,13,"ion-header",[],null,null,null,E.A,E.h)),e.pb(1,49152,null,0,i.y,[e.h,e.k,e.x],null,null),(l()(),e.qb(2,0,null,0,11,"div",[["style","background-color: black; align-content: center;"]],null,null,null,null,null)),(l()(),e.qb(3,0,null,null,10,"table",[["style","margin-left: 10px; margin-top: 5px; margin-bottom: 2px;"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,1,"span",[["style","margin-top:20px; margin-left: 5px; margin-top: 1px;"]],null,null,null,null,null)),(l()(),e.qb(8,0,null,null,0,"img",[["height","35"],["src","../../assets/tablez.png"],["width","35"]],null,null,null,null,null)),(l()(),e.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Gb(-1,null,["\xa0"])),(l()(),e.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"span",[["style","color: white; margin-top: 1px;"]],null,null,null,null,null)),(l()(),e.Gb(-1,null,["Open Audit"])),(l()(),e.qb(14,0,null,null,5,"ion-content",[],null,null,null,E.w,E.d)),e.pb(15,49152,null,0,i.r,[e.h,e.k,e.x],null,null),(l()(),e.fb(16777216,null,0,1,null,c)),e.pb(17,278528,null,0,o.h,[e.L,e.I,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.fb(16777216,null,0,1,null,a)),e.pb(19,278528,null,0,o.h,[e.L,e.I,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component;l(n,17,0,t.AttemptedAuditForStore),l(n,19,0,t.AttemptedSection)}),null)}var d=e.mb("app-list-audit",S,(function(l){return e.Hb(0,[(l()(),e.qb(0,0,null,null,1,"app-list-audit",[],null,null,null,O,r)),e.pb(1,114688,null,0,S,[D.a,_.m,I.a,i.Db,A.a,_.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),h=t("s7LF"),b=function l(){_classCallCheck(this,l)};t.d(n,"ListAuditPageModuleNgFactory",(function(){return p}));var p=e.nb(u,[],(function(l){return e.zb([e.Ab(512,e.j,e.Y,[[8,[T.a,d]],[3,e.j],e.v]),e.Ab(4608,o.k,o.j,[e.s,[2,o.q]]),e.Ab(4608,h.n,h.n,[]),e.Ab(4608,i.a,i.a,[e.x,e.g]),e.Ab(4608,i.Ab,i.Ab,[i.a,e.j,e.p]),e.Ab(4608,i.Eb,i.Eb,[i.a,e.j,e.p]),e.Ab(1073742336,o.b,o.b,[]),e.Ab(1073742336,h.m,h.m,[]),e.Ab(1073742336,h.g,h.g,[]),e.Ab(1073742336,i.yb,i.yb,[]),e.Ab(1073742336,_.n,_.n,[[2,_.s],[2,_.m]]),e.Ab(1073742336,b,b,[]),e.Ab(1073742336,u,u,[]),e.Ab(1024,_.k,(function(){return[[{path:"",component:S}]]}),[])])}))}}]);