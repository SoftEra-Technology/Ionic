(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8wZ6":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class e{}var o=u("4XKt"),i=u("pMnS"),r=u("MKJQ"),a=u("sZkV"),T=u("SVse"),c=u("s7LF"),E=u("mrSG"),s=u("6GXZ"),b=u("9mtz"),d=u("kwUn"),D=u("Pn9U"),A=u("Hle8"),h=u("b6o4");class p{constructor(l,n,u,t,e,o,i){this.platform=l,this.sqlite=n,this.userService=u,this.router=t,this.camera=e,this.modalController=o,this.screenOrientation=i,this.database_name="AUDIT_DB.db",this.image="",this.Question_comment="",this.store=new b.a,this.platform.ready().then(()=>{this.createDB(),this.setLandscape()}).catch(l=>{console.log(l)})}openCam(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(l=>{this.imageData=l,this.image=window.Ionic.WebView.convertFileSrc(l)},l=>{console.log("error "+JSON.stringify(l))})}upload(){const l=(new Date).valueOf()+".jpeg",n=this.dataURItoBlob(this.imageData),u=new File([n],l,{type:"image/jpeg"});(new FormData).append("file",u)}dataURItoBlob(l){const n=window.atob(l),u=new ArrayBuffer(n.length),t=new Uint8Array(u);for(let e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return new Blob([t],{type:"image/jpeg"})}Add_Comment(){return E.a(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:A.a,componentProps:{comment:this.Question_comment}});return l.onDidDismiss().then(l=>{console.log("data from model popup in close Audit"),console.log(l);const n=l.data;console.log(n),this.Question_comment=n}),yield l.present()}))}OenAudit_Page_setting(l,n,u){this.objecta="",this.objecta={AttemptedId:l,AuditId:n,Storeid:u}}GoToAuditList(){this.router.navigate(["/list-audit"],{queryParams:{value:JSON.stringify(this.objecta)}})}setLandscape(){this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE)}createDB(){console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then(l=>{this.databaseObj=l,this.getRows()}).catch(l=>{alert("error "+JSON.stringify(l))})}getRows(){this.databaseObj.executeSql("SELECT * FROM USER_TB",[]).then(l=>{if(this.row_data=[],l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.row_data.push(l.rows.item(n)),console.log(this.row_data[n].EMP_ID.toString());this.fetchAttemptedOpenAuditByUser(this.row_data[0].EMP_ID.toString())}}).catch(l=>{alert("error "+JSON.stringify(l))})}fetchAttemptedOpenAuditByUser(l){this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='"+l+"' AND AUDIT_STATUS='Close'",[]).then(l=>{if(this.AttemptedOpenAuditByUser=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.AttemptedOpenAuditByUser.push(l.rows.item(n));return this.AttemptedOpenAuditByUser}}).catch(l=>{alert("error "+JSON.stringify(l))})}GoToDashboard(){this.router.navigate(["dash-board"])}ngOnInit(){}deletAttemptedAuditById(l){this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_RECIVING_QUESTIONS WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_OPTION WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_IMAGES_TB WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))}),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED WHERE ATTEMPTED_ID="+l,[]).then(l=>{console.log(l)}).catch(l=>{alert("error "+JSON.stringify(l))})}}var I=u("iInd"),_=t.ob({encapsulation:0,styles:[[""]],data:{}});function S(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["height","40"],["src","../../assets/red_lock_48.png"],["width","50"]],null,null,null,null,null))],null,null)}function m(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["height","40"],["src","../../assets/refresh1.jpg"],["width","50"]],null,null,null,null,null))],null,null)}function g(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,25,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,24,"ion-item",[],null,null,null,r.F,r.k)),t.pb(2,49152,null,0,a.F,[t.h,t.k,t.x],null,null),(l()(),t.qb(3,0,null,0,14,"table",[],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,13,"tbody",[],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,4,"td",[["align","center"],["rowspan","2"],["width","5%"]],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,S)),t.pb(8,16384,null,0,T.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,m)),t.pb(10,16384,null,0,T.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(11,0,null,null,2,"td",[["align","left"],["style","font-size:x-large;"],["width","90%"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t.Hb(13,null,[" Audit: "," ",""])),(l()(),t.qb(14,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,2,"td",[["align","left"]],null,null,null,null,null)),(l()(),t.Hb(16,null,[" \xa0\xa0Audit Performed On: "," Total Marks: "," Marks Scored: "," "])),t.Db(0,T.n,[]),(l()(),t.qb(18,0,null,0,7,"ion-note",[["color","tertiary"],["slot","end"]],null,null,null,r.I,r.n)),t.pb(19,49152,null,0,a.T,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.qb(20,0,null,0,5,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.OenAudit_Page_setting(l.context.$implicit.ATTEMPTED_ID,l.context.$implicit.AUDIT_ID,l.context.$implicit.STR_CODE)&&t),t}),r.w,r.b)),t.pb(21,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.qb(22,0,null,0,3,"ion-checkbox",[["color","dark"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0;return"ionBlur"===n&&(e=!1!==t.Cb(l,25)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==t.Cb(l,25)._handleIonChange(u.target)&&e),e}),r.x,r.c)),t.Eb(5120,null,c.h,(function(l){return[l]}),[a.b]),t.pb(24,49152,null,0,a.p,[t.h,t.k,t.x],{color:[0,"color"]},null),t.pb(25,16384,null,0,a.b,[t.k],null,null)],(function(l,n){l(n,8,0,0===n.context.$implicit.MARKS_SCORED),l(n,10,0,n.context.$implicit.MARKS_SCORED>0),l(n,19,0,"tertiary"),l(n,21,0,"medium"),l(n,24,0,"dark")}),(function(l,n){l(n,13,0,n.context.$implicit.AUDIT_NAME,n.context.$implicit.STR_NAME),l(n,16,0,t.Ib(n,16,0,t.Cb(n,17).transform(n.context.$implicit.AUDIT_DT,0,10)),n.context.$implicit.AUDIT_POINTS,n.context.$implicit.MARKS_SCORED)}))}function O(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,13,"ion-header",[],null,null,null,r.D,r.i)),t.pb(1,49152,null,0,a.z,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,11,"div",[["style","background-color: black; align-content: center;"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,10,"table",[["style","margin-left: 10px; margin-top: 5px; margin-bottom: 2px;"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["style","margin-top:20px; margin-left: 5px; margin-top: 1px;"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,0,"img",[["height","35"],["src","../../assets/tablez.png"],["width","35"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["\xa0"])),(l()(),t.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,1,"span",[["style","color: white; margin-top: 1px;"]],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Compleated Audit"])),(l()(),t.qb(14,0,null,null,3,"ion-content",[],null,null,null,r.z,r.e)),t.pb(15,49152,null,0,a.s,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,g)),t.pb(17,278528,null,0,T.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(18,0,null,null,35,"ion-footer",[["class","ion-no-border"]],null,null,null,r.B,r.g)),t.pb(19,49152,null,0,a.x,[t.h,t.k,t.x],null,null),(l()(),t.qb(20,0,null,0,33,"ion-grid",[],null,null,null,r.C,r.h)),t.pb(21,49152,null,0,a.y,[t.h,t.k,t.x],null,null),(l()(),t.qb(22,0,null,0,31,"ion-row",[],null,null,null,r.L,r.q)),t.pb(23,49152,null,0,a.eb,[t.h,t.k,t.x],null,null),(l()(),t.qb(24,0,null,0,5,"ion-col",[],null,null,null,r.y,r.d)),t.pb(25,49152,null,0,a.r,[t.h,t.k,t.x],null,null),(l()(),t.qb(26,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(27,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.Add_Comment()&&t),t}),r.w,r.b)),t.pb(28,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.Hb(-1,0,["Audit Findings"])),(l()(),t.qb(30,0,null,0,5,"ion-col",[],null,null,null,r.y,r.d)),t.pb(31,49152,null,0,a.r,[t.h,t.k,t.x],null,null),(l()(),t.qb(32,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(33,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.openCam()&&t),t}),r.w,r.b)),t.pb(34,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.Hb(-1,0,["Attach Image"])),(l()(),t.qb(36,0,null,0,5,"ion-col",[],null,null,null,r.y,r.d)),t.pb(37,49152,null,0,a.r,[t.h,t.k,t.x],null,null),(l()(),t.qb(38,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(39,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,null,null,r.w,r.b)),t.pb(40,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.Hb(-1,0,["Push"])),(l()(),t.qb(42,0,null,0,5,"ion-col",[],null,null,null,r.y,r.d)),t.pb(43,49152,null,0,a.r,[t.h,t.k,t.x],null,null),(l()(),t.qb(44,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(45,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.GoToAuditList()&&t),t}),r.w,r.b)),t.pb(46,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.Hb(-1,0,["Open"])),(l()(),t.qb(48,0,null,0,5,"ion-col",[],null,null,null,r.y,r.d)),t.pb(49,49152,null,0,a.r,[t.h,t.k,t.x],null,null),(l()(),t.qb(50,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(51,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.GoToDashboard()&&t),t}),r.w,r.b)),t.pb(52,49152,null,0,a.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.Hb(-1,0,["Exit"]))],(function(l,n){l(n,17,0,n.component.AttemptedOpenAuditByUser),l(n,28,0,"medium","full"),l(n,34,0,"medium","full"),l(n,40,0,"medium","full"),l(n,46,0,"medium","full"),l(n,52,0,"medium","full")}),null)}function M(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,1,"app-close-audit",[],null,null,null,O,_)),t.pb(1,114688,null,0,p,[a.Eb,s.a,d.a,I.m,D.a,a.Bb,h.a],null,null)],(function(l,n){l(n,1,0)}),null)}var f=t.mb("app-close-audit",p,M,{},{},[]),U=u("zjAK");class x{}u.d(n,"CloseAuditPageModuleNgFactory",(function(){return q}));var q=t.nb(e,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[o.a,i.a,f]],[3,t.j],t.v]),t.Ab(4608,T.k,T.j,[t.s,[2,T.r]]),t.Ab(4608,c.o,c.o,[]),t.Ab(4608,a.a,a.a,[t.x,t.g]),t.Ab(4608,a.Bb,a.Bb,[a.a,t.j,t.p]),t.Ab(4608,a.Fb,a.Fb,[a.a,t.j,t.p]),t.Ab(1073742336,T.b,T.b,[]),t.Ab(1073742336,c.n,c.n,[]),t.Ab(1073742336,c.g,c.g,[]),t.Ab(1073742336,a.zb,a.zb,[]),t.Ab(1073742336,U.a,U.a,[]),t.Ab(1073742336,I.n,I.n,[[2,I.s],[2,I.m]]),t.Ab(1073742336,x,x,[]),t.Ab(1073742336,e,e,[]),t.Ab(1024,I.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);