(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"RV+b":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class e{}var i=u("pMnS"),o=u("MKJQ"),r=u("sZkV"),a=u("SVse"),s=u("6GXZ"),b=u("9mtz"),c=u("kwUn"),T=u("b6o4");class A{constructor(l,n,u,t,e){this.platform=l,this.sqlite=n,this.userService=u,this.router=t,this.screenOrientation=e,this.database_name="AUDIT_DB.db",this.store=new b.a,this.platform.ready().then(()=>{this.createDB(),this.setLandscape()}).catch(l=>{console.log(l)})}setLandscape(){this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE)}createDB(){console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then(l=>{this.databaseObj=l,this.getRows()}).catch(l=>{alert("error "+JSON.stringify(l))})}getRows(){this.databaseObj.executeSql("SELECT * FROM USER_TB",[]).then(l=>{if(this.row_data=[],l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.row_data.push(l.rows.item(n)),console.log(this.row_data[n].EMP_ID.toString());this.fetchAttemptedOpenAuditByUser(this.row_data[0].EMP_ID.toString())}}).catch(l=>{alert("error "+JSON.stringify(l))})}fetchAttemptedOpenAuditByUser(l){this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='"+l+"' AND AUDIT_STATUS='Open'",[]).then(l=>{if(this.AttemptedOpenAuditByUser=[],console.log(l),l.rows.length>0){for(var n=0;n<l.rows.length;n++)this.AttemptedOpenAuditByUser.push(l.rows.item(n));return this.AttemptedOpenAuditByUser}}).catch(l=>{alert("error "+JSON.stringify(l))})}GoToDashboard(){this.router.navigate(["dash-board"])}ngOnInit(){}OenAudit_Page(l,n,u){this.router.navigate(["/list-audit"],{queryParams:{value:JSON.stringify({AttemptedId:l,AuditId:n,Storeid:u})}})}}var p=u("iInd"),E=t.ob({encapsulation:0,styles:[[""]],data:{}});function D(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["height","30"],["src","../../assets/red_lock_48.png"],["width","30"]],null,null,null,null,null))],null,null)}function d(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"img",[["height","30"],["src","../../assets/refresh1.jpg"],["width","30"]],null,null,null,null,null))],null,null)}function h(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,15,"div",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,14,"ion-item",[],null,null,null,o.D,o.j)),t.pb(2,49152,null,0,r.E,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,D)),t.pb(4,16384,null,0,a.j,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,0,1,null,d)),t.pb(6,16384,null,0,a.j,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(l()(),t.Ib(7,0,[" Audit: "," "," "])),(l()(),t.qb(8,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Ib(9,0,[" \xa0\xa0\xa0\xa0\xa0Audit Performed On: "," Total Marks "," Marks Scored "," "])),t.Db(0,a.o,[]),(l()(),t.qb(11,0,null,0,4,"ion-note",[["color","tertiary"],["slot","end"]],null,null,null,o.G,o.m)),t.pb(12,49152,null,0,r.S,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.qb(13,0,null,0,2,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.OenAudit_Page(l.context.$implicit.ATTEMPTED_ID,l.context.$implicit.AUDIT_ID,l.context.$implicit.STR_CODE)&&t),t}),o.v,o.b)),t.pb(14,49152,null,0,r.h,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Ib(-1,0,["Open"]))],(function(l,n){l(n,4,0,0===n.context.$implicit.MARKS_SCORED),l(n,6,0,n.context.$implicit.MARKS_SCORED>0),l(n,12,0,"tertiary"),l(n,14,0,"medium")}),(function(l,n){l(n,7,0,n.context.$implicit.AUDIT_NAME,n.context.$implicit.STR_NAME),l(n,9,0,t.Jb(n,9,0,t.Cb(n,10).transform(n.context.$implicit.AUDIT_DT,0,10)),n.context.$implicit.AUDIT_POINTS,n.context.$implicit.MARKS_SCORED)}))}function I(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,13,"ion-header",[],null,null,null,o.B,o.h)),t.pb(1,49152,null,0,r.y,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,11,"div",[["style","background-color: black; align-content: center;"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,10,"table",[["style","margin-left: 10px; margin-top: 5px; margin-bottom: 2px;"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,1,"span",[["style","margin-top:20px; margin-left: 5px; margin-top: 1px;"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,0,"img",[["height","35"],["src","../../assets/tablez.png"],["width","35"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["\xa0"])),(l()(),t.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,1,"span",[["style","color: white; margin-top: 1px;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Open Audit"])),(l()(),t.qb(14,0,null,null,3,"ion-content",[],null,null,null,o.x,o.d)),t.pb(15,49152,null,0,r.r,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,h)),t.pb(17,278528,null,0,a.i,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(18,0,null,null,17,"ion-footer",[["class","ion-no-border"]],null,null,null,o.z,o.f)),t.pb(19,49152,null,0,r.w,[t.h,t.k,t.x],null,null),(l()(),t.qb(20,0,null,0,15,"ion-grid",[],null,null,null,o.A,o.g)),t.pb(21,49152,null,0,r.x,[t.h,t.k,t.x],null,null),(l()(),t.qb(22,0,null,0,13,"ion-row",[],null,null,null,o.J,o.p)),t.pb(23,49152,null,0,r.db,[t.h,t.k,t.x],null,null),(l()(),t.qb(24,0,null,0,5,"ion-col",[],null,null,null,o.w,o.c)),t.pb(25,49152,null,0,r.q,[t.h,t.k,t.x],null,null),(l()(),t.qb(26,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.qb(27,0,null,null,2,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.GoToDashboard()&&t),t}),o.v,o.b)),t.pb(28,49152,null,0,r.h,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Ib(-1,0,["Exit"])),(l()(),t.qb(30,0,null,0,2,"ion-col",[],null,null,null,o.w,o.c)),t.pb(31,49152,null,0,r.q,[t.h,t.k,t.x],null,null),(l()(),t.qb(32,0,null,0,0,"div",[],null,null,null,null,null)),(l()(),t.qb(33,0,null,0,2,"ion-col",[],null,null,null,o.w,o.c)),t.pb(34,49152,null,0,r.q,[t.h,t.k,t.x],null,null),(l()(),t.qb(35,0,null,0,0,"div",[],null,null,null,null,null))],(function(l,n){l(n,17,0,n.component.AttemptedOpenAuditByUser),l(n,28,0,"medium")}),null)}function S(l){return t.Kb(0,[(l()(),t.qb(0,0,null,null,1,"app-open-audit",[],null,null,null,I,E)),t.pb(1,114688,null,0,A,[r.Db,s.a,c.a,p.m,T.a],null,null)],(function(l,n){l(n,1,0)}),null)}var _=t.mb("app-open-audit",A,S,{},{},[]),O=u("s7LF");class m{}u.d(n,"OpenAuditPageModuleNgFactory",(function(){return g}));var g=t.nb(e,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[i.a,_]],[3,t.j],t.v]),t.Ab(4608,a.l,a.k,[t.s,[2,a.s]]),t.Ab(4608,O.o,O.o,[]),t.Ab(4608,r.a,r.a,[t.x,t.g]),t.Ab(4608,r.Ab,r.Ab,[r.a,t.j,t.p]),t.Ab(4608,r.Eb,r.Eb,[r.a,t.j,t.p]),t.Ab(1073742336,a.b,a.b,[]),t.Ab(1073742336,O.n,O.n,[]),t.Ab(1073742336,O.g,O.g,[]),t.Ab(1073742336,r.yb,r.yb,[]),t.Ab(1073742336,p.n,p.n,[[2,p.s],[2,p.m]]),t.Ab(1073742336,m,m,[]),t.Ab(1073742336,e,e,[]),t.Ab(1024,p.k,(function(){return[[{path:"",component:A}]]}),[])])}))}}]);