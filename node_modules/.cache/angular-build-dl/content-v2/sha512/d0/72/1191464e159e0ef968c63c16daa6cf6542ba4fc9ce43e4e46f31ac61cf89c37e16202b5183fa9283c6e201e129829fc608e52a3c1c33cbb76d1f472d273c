function _defineProperties(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,l,e){return l&&_defineProperties(n.prototype,l),e&&_defineProperties(n,e),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8wZ6":function(n,l,e){"use strict";e.r(l);var t=e("8Y7J"),u=function n(){_classCallCheck(this,n)},i=e("MKJQ"),o=e("sZkV"),r=e("s7LF"),s=function n(){_classCallCheck(this,n)},a=function(){function n(l,e){_classCallCheck(this,n),this.navParams=l,this.modalController=e,this.UMobject=new s,this.comment_um=this.navParams.get("comment"),this.UMId=this.navParams.get("UMId"),this.PASS=this.navParams.get("PASS")}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"save_Comment",value:function(){this.dismiss()}},{key:"close_Comment",value:function(){this.dismiss()}},{key:"dismiss",value:function(){var n=new s;n.UMId=this.UMId,n.UMPASS=this.PASS,n.UComment=this.comment_um,this.modalController.dismiss(n)}}]),n}(),c=t.ob({encapsulation:0,styles:[[""]],data:{}});function d(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,40,"ion-content",[],null,null,null,i.z,i.e)),t.pb(1,49152,null,0,o.s,[t.h,t.k,t.x],null,null),(n()(),t.qb(2,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.qb(3,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.qb(4,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.qb(5,0,null,0,18,"div",[["style","margin-left:35px; margin-right: 35px;"]],null,null,null,null,null)),(n()(),t.qb(6,0,null,null,7,"div",[["style","border: 1px solid black;"]],null,null,null,null,null)),(n()(),t.qb(7,0,null,null,6,"ion-input",[["placeholder","Unit Manager Id"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t.Cb(n,8)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,8)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.UMId=e)&&u),u}),i.E,i.j)),t.pb(8,16384,null,0,o.Jb,[t.k],null,null),t.Eb(1024,null,r.h,(function(n){return[n]}),[o.Jb]),t.pb(10,671744,null,0,r.l,[[8,null],[8,null],[8,null],[6,r.h]],{model:[0,"model"]},{update:"ngModelChange"}),t.Eb(2048,null,r.i,null,[r.l]),t.pb(12,16384,null,0,r.j,[[4,r.i]],null,null),t.pb(13,49152,null,0,o.E,[t.h,t.k,t.x],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(n()(),t.qb(14,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.qb(15,0,null,null,7,"div",[["style","border: 1px solid black;"]],null,null,null,null,null)),(n()(),t.qb(16,0,null,null,6,"ion-input",[["placeholder","Password"],["type","Password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t.Cb(n,17)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,17)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.PASS=e)&&u),u}),i.E,i.j)),t.pb(17,16384,null,0,o.Jb,[t.k],null,null),t.Eb(1024,null,r.h,(function(n){return[n]}),[o.Jb]),t.pb(19,671744,null,0,r.l,[[8,null],[8,null],[8,null],[6,r.h]],{model:[0,"model"]},{update:"ngModelChange"}),t.Eb(2048,null,r.i,null,[r.l]),t.pb(21,16384,null,0,r.j,[[4,r.i]],null,null),t.pb(22,49152,null,0,o.E,[t.h,t.k,t.x],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(n()(),t.qb(23,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.qb(24,0,null,0,1,"div",[["style","margin-left: 8px; margin-right: 8px;"]],null,null,null,null,null)),(n()(),t.Hb(-1,null,["Comment"])),(n()(),t.qb(26,0,null,0,7,"div",[["style","border-style: double; margin-left: 8px; margin-right: 8px;"]],null,null,null,null,null)),(n()(),t.qb(27,0,null,null,6,"ion-textarea",[["cols","25"],["rows","6"],["style","background-color: whitesmoke;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t.Cb(n,28)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,28)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.comment_um=e)&&u),u}),i.P,i.u)),t.pb(28,16384,null,0,o.Jb,[t.k],null,null),t.Eb(1024,null,r.h,(function(n){return[n]}),[o.Jb]),t.pb(30,671744,null,0,r.l,[[8,null],[8,null],[8,null],[6,r.h]],{model:[0,"model"]},{update:"ngModelChange"}),t.Eb(2048,null,r.i,null,[r.l]),t.pb(32,16384,null,0,r.j,[[4,r.i]],null,null),t.pb(33,49152,null,0,o.tb,[t.h,t.k,t.x],{cols:[0,"cols"],rows:[1,"rows"]},null),(n()(),t.qb(34,0,null,0,6,"div",[["style","margin-left: 8px; margin-right: 8px;"]],null,null,null,null,null)),(n()(),t.qb(35,0,null,null,2,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.close_Comment()&&t),t}),i.w,i.b)),t.pb(36,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.Hb(-1,0,["Exit"])),(n()(),t.qb(38,0,null,null,2,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.save_Comment()&&t),t}),i.w,i.b)),t.pb(39,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.Hb(-1,0,["Push"]))],(function(n,l){var e=l.component;n(l,10,0,e.UMId),n(l,13,0,"Unit Manager Id","text"),n(l,19,0,e.PASS),n(l,22,0,"Password","Password"),n(l,30,0,e.comment_um),n(l,33,0,"25","6"),n(l,36,0,"medium"),n(l,39,0,"medium")}),(function(n,l){n(l,7,0,t.Cb(l,12).ngClassUntouched,t.Cb(l,12).ngClassTouched,t.Cb(l,12).ngClassPristine,t.Cb(l,12).ngClassDirty,t.Cb(l,12).ngClassValid,t.Cb(l,12).ngClassInvalid,t.Cb(l,12).ngClassPending),n(l,16,0,t.Cb(l,21).ngClassUntouched,t.Cb(l,21).ngClassTouched,t.Cb(l,21).ngClassPristine,t.Cb(l,21).ngClassDirty,t.Cb(l,21).ngClassValid,t.Cb(l,21).ngClassInvalid,t.Cb(l,21).ngClassPending),n(l,27,0,t.Cb(l,32).ngClassUntouched,t.Cb(l,32).ngClassTouched,t.Cb(l,32).ngClassPristine,t.Cb(l,32).ngClassDirty,t.Cb(l,32).ngClassValid,t.Cb(l,32).ngClassInvalid,t.Cb(l,32).ngClassPending)}))}var h=t.mb("app-unit-manager-login",a,(function(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,1,"app-unit-manager-login",[],null,null,null,d,c)),t.pb(1,114688,null,0,a,[o.Eb,o.Cb],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),A=e("4XKt"),E=e("pMnS"),T=e("SVse"),b=e("mrSG"),m=e("6GXZ"),g=e("9mtz"),p=e("kwUn"),_=e("Pn9U"),I=e("Hle8"),D=e("u9AK"),f=e("b6o4"),C=function n(){_classCallCheck(this,n)},S=function n(){_classCallCheck(this,n)},O=function n(){_classCallCheck(this,n)},v=function(n){return new Promise((function(l){return setTimeout(l,n)}))},U=function(){function n(l,e,t,u,i,o,r,a){var c=this;_classCallCheck(this,n),this.platform=l,this.sqlite=e,this.userService=t,this.router=u,this.camera=i,this.modalController=o,this.screenOrientation=r,this.ionLoader=a,this.database_name="AUDIT_DB.db",this.savedQuestions_array=[],this.ObjUM=new s,this.image="",this.Question_comment="",this.AttemptedClosedAuditByUser=[],this.AttemptedClosedAudit=[],this.AttemptedClosedAuditSection=[],this.AttemptedClosedAuditSectionQuestion=[],this.AttemptedClosedAuditSectionQuestionAnswer=[],this.unit_managerid="",this.unit_managerPass="",this.unit_managerComment="",this.filledChoices1=[],this.store=new g.a,this.platform.ready().then((function(){c.createDB(),c.setLandscape()})).catch((function(n){console.log(n)}))}return _createClass(n,[{key:"showLoader",value:function(){var n=this;this.ionLoader.showLoader(),setTimeout((function(){n.hideLoader()}),328e3)}},{key:"hideLoader",value:function(){this.ionLoader.hideLoader(),window.location.reload()}},{key:"openCam",value:function(){var n=this;this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then((function(l){n.imageData=l,n.image=window.Ionic.WebView.convertFileSrc(l)}),(function(n){console.log("error "+JSON.stringify(n))}))}},{key:"upload",value:function(){var n=(new Date).valueOf()+".jpeg",l=this.dataURItoBlob(this.imageData),e=new File([l],n,{type:"image/jpeg"});(new FormData).append("file",e)}},{key:"dataURItoBlob",value:function(n){for(var l=window.atob(n),e=new ArrayBuffer(l.length),t=new Uint8Array(e),u=0;u<l.length;u++)t[u]=l.charCodeAt(u);return new Blob([t],{type:"image/jpeg"})}},{key:"Add_Comment",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var l,e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:I.a,componentProps:{comment:this.Question_comment}});case 2:return(l=n.sent).onDidDismiss().then((function(n){console.log("data from model popup in close Audit"),console.log(n);var l=n.data;console.log(l),e.Question_comment=l})),n.next=6,l.present();case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"OenAudit_Page_setting",value:function(n,l,e){this.objecta="",this.objecta={AttemptedId:n,AuditId:l,Storeid:e}}},{key:"GoToAuditList",value:function(){this.router.navigate(["/list-audit"],{queryParams:{value:JSON.stringify(this.objecta)}})}},{key:"setLandscape",value:function(){this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE)}},{key:"createDB",value:function(){var n=this;console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then((function(l){n.databaseObj=l,n.getRows()})).catch((function(n){alert("error "+JSON.stringify(n))}))}},{key:"getRows",value:function(){var n=this;this.databaseObj.executeSql("SELECT * FROM USER_TB",[]).then((function(l){if(n.row_data=[],l.rows.length>0){for(var e=0;e<l.rows.length;e++)n.row_data.push(l.rows.item(e)),console.log(n.row_data[e].EMP_ID.toString());n.fetchAttemptedOpenAuditByUser(n.row_data[0].EMP_ID.toString())}})).catch((function(n){alert("error "+JSON.stringify(n))}))}},{key:"fetchAttemptedOpenAuditByUser",value:function(n){var l=this;this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='"+n+"' AND AUDIT_STATUS='Close'",[]).then((function(n){if(l.AttemptedOpenAuditByUser=[],console.log(n),n.rows.length>0){for(var e=0;e<n.rows.length;e++)l.AttemptedOpenAuditByUser.push(n.rows.item(e));return l.AttemptedOpenAuditByUser}})).catch((function(n){alert("error "+JSON.stringify(n))}))}},{key:"GoToDashboard",value:function(){this.router.navigate(["/dash-board"],{queryParams:{value:"refresh"}})}},{key:"ngOnInit",value:function(){}},{key:"PushAudit",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var l,e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=this.objecta){n.next=2;break}return n.abrupt("return",(alert("Please Select One Audit"),!1));case 2:return n.next=4,this.modalController.create({component:a,componentProps:{comment:this.unit_managerComment,UMId:this.unit_managerid,PASS:this.unit_managerPass}});case 4:return(l=n.sent).onDidDismiss().then((function(n){console.log("data from model popup in close Audit for Unit Manager"),console.log(n);var l=n.data;console.log(l),e.ObjUM=l,e.unit_managerid=e.ObjUM.UMId,e.unit_managerPass=e.ObjUM.UMPASS,e.unit_managerComment=e.ObjUM.UComment,console.log(e.unit_managerid),""==e.unit_managerid||""==e.unit_managerPass?alert("Please Enter Unit Manager Id And PassWord"):e.PushAudit_server(e.unit_managerid,e.unit_managerPass,e.unit_managerComment)})),n.next=8,l.present();case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"PushAudit_server",value:function(n,l,e){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.showLoader(),this.savedAudit=new C,this.databaseObj.executeSql("SELECT AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+this.objecta.AttemptedId+" AND AUDIT_ID="+this.objecta.AuditId,[]).then((function(e){if(t.AttemptedClosedAudit=[],e.rows.length>0){for(var u=0;u<e.rows.length;u++)t.AttemptedClosedAudit.push(e.rows.item(u));console.log("Audit"),t.savedAudit._auditId=Number(t.AttemptedClosedAudit[0].AUDIT_ID),t.savedAudit._strCode=String(t.AttemptedClosedAudit[0].STR_CODE),t.savedAudit._auditor=String(t.AttemptedClosedAudit[0].USER_ID),t.savedAudit._stroreManager=String(t.AttemptedClosedAudit[0].STR_MANAGER);var i=String(t.AttemptedClosedAudit[0].AUDIT_DT).slice(0,10).split("-");t.savedAudit._auditDt=i[2]+"/"+i[1]+"/"+i[0],t.savedAudit._uniqueId=String(t.AttemptedClosedAudit[0].UNIQUE_ID),t.savedAudit._isValid="yes",t.savedAudit._status="Closed",t.savedAudit._umId=n,t.savedAudit._umPwd=l,t.savedAudit._auditeeComment="Auditee Comment",t.savedAudit._auditorComment="Auditror Comment",t.savedAudit._auditFindings="Audit Findings",t.GetClosedSection(),console.log(t.savedAudit)}})).catch((function(n){console.log("error "+JSON.stringify(n))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"GetClosedSection",value:function(){var n=this,l=this.objecta.AttemptedId,e=this.objecta.AuditId;this.databaseObj.executeSql("SELECT SECTION_ID, SECTION_NAME, SECTION_ORDER FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID="+l+" AND AUDIT_ID="+e,[]).then((function(t){return b.a(n,void 0,void 0,regeneratorRuntime.mark((function n(){var u,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.AttemptedClosedAuditSection=[],!(t.rows.length>0)){n.next=18;break}for(u=0;u<t.rows.length;u++)this.AttemptedClosedAuditSection.push(t.rows.item(u));console.log("Audit section"),this.savedQuestions_array=[],u=0;case 3:if(!(u<this.AttemptedClosedAuditSection.length)){n.next=9;break}return n.next=6,this.GetClosedSeectionQuestion(Number(l),Number(e),Number(this.AttemptedClosedAuditSection[u].SECTION_ID),String(this.AttemptedClosedAuditSection[u].SECTION_NAME),Number(this.AttemptedClosedAuditSection[u].SECTION_ORDER));case 6:u++,n.next=3;break;case 9:this.savedAudit._lstQuestion=this.savedQuestions_array,u=0;case 10:if(!(u<this.savedAudit._lstQuestion.length)){n.next=17;break}return n.next=13,this.GetClosedSeectionQuestionAnswer(Number(l),Number(e),Number(this.savedAudit._lstQuestion[u]._questionId));case 13:this.savedAudit._lstQuestion[u]._lstChoice=this.filledChoices1;case 14:u++,n.next=10;break;case 17:console.log("object of audit aaaaaaaaaaa"),console.log(JSON.stringify(this.savedAudit)),console.log(this.savedAudit),this.userService.Post_Close_Audit(this.savedAudit).subscribe((function(n){1==n.StatusFl?(alert("Audit Uploded"),i.deletAttemptedAuditById(Number(l)),i.ionLoader.hideLoader(),window.location.reload()):(alert(n.Msg),i.ionLoader.hideLoader())}));case 18:case"end":return n.stop()}}),n,this)})))})).catch((function(n){console.log("error "+JSON.stringify(n))}))}},{key:"GetClosedSeectionQuestion",value:function(n,l,e,t,u){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.databaseObj.executeSql("SELECT QUESTION_ID,QUESTION_NAME,QUESTION_ORDER,QUESTION_TYPE_ID,QUESTION_TYPE,QUESTION_COMMENT,IMAGE_NAME FROM AUDIT_ATTEMPTED_QUESTIONS  WHERE  ATTEMPTED_ID="+n+" AND AUDIT_ID="+l+" AND SECTION_ID="+e,[]).then((function(n){return b.a(o,void 0,void 0,regeneratorRuntime.mark((function l(){var i,o;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(this.AttemptedClosedAuditSectionQuestion=[],n.rows.length>0){for(i=0;i<n.rows.length;i++)this.AttemptedClosedAuditSectionQuestion.push(n.rows.item(i));for(console.log("Question"),i=0;i<this.AttemptedClosedAuditSectionQuestion.length;i++)(o=new S)._sectionId=e,o._sectionNm=t,o._sectionOrder=u,o._questionId=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_ID),o._questionNm=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_NAME,o._questionOrder=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_ORDER),o._questionTypeId=Number(this.AttemptedClosedAuditSectionQuestion[i].QUESTION_TYPE_ID),o._questionType=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_TYPE,o._imgString=this.AttemptedClosedAuditSectionQuestion[i].QUESTION_COMMENT,o._attachedImage=this.AttemptedClosedAuditSectionQuestion[i].IMAGE_NAME,o._questionAns="aks",this.savedQuestions_array.push(o),console.log("Question Answer obj"),console.log(this.savedQuestions_array)}case 1:case"end":return l.stop()}}),l,this)})))})).catch((function(n){console.log("error "+JSON.stringify(n))})),i.next=3,v(5e3);case 3:return console.log("done!"),i.abrupt("return",10);case 5:case"end":return i.stop()}}),i,this)})))}},{key:"GetClosedSeectionQuestionAnswer",value:function(n,l,e){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function t(){var u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.databaseObj.executeSql("SELECT A.ATTEMPTED_ID,A.AUDIT_ID,A.SECTION_ID,A.QUESTION_ID,A.CHOICE_ID,A.CHOICE_TEXT,A.POINTS,A.COMMENTS,A.CHOICE_VALUE,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE A INNER JOIN AUDIT_ATTEMPTED_QUESTIONS B ON A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.QUESTION_ID=B.QUESTION_ID WHERE A.ATTEMPTED_ID="+n+" AND A.AUDIT_ID="+l+" AND A.QUESTION_ID="+e,[]).then((function(n){if(u.AttemptedClosedAuditSectionQuestionAnswer=[],console.log(n),n.rows.length>0){for(var l=0;l<n.rows.length;l++)u.AttemptedClosedAuditSectionQuestionAnswer.push(n.rows.item(l));for(console.log("Question Answer"),console.log(u.AttemptedClosedAuditSectionQuestionAnswer),u.filledChoices1=[],l=0;l<u.AttemptedClosedAuditSectionQuestionAnswer.length;l++){var e=new O;e.Choice=u.AttemptedClosedAuditSectionQuestionAnswer[l].CHOICE_TEXT,e.ChoiceId=Number(u.AttemptedClosedAuditSectionQuestionAnswer[l].CHOICE_ID),e.Marks=Number(u.AttemptedClosedAuditSectionQuestionAnswer[l].POINTS),e.Comments="Akshay",e.Value=u.AttemptedClosedAuditSectionQuestionAnswer[l].CHOICE_VALUE,u.filledChoices1.push(e)}}})).catch((function(n){console.log("error "+JSON.stringify(n))})),console.log("this might take some time...."),t.next=4,v(5e3);case 4:return console.log("done!"),t.abrupt("return",10);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"deletAttemptedAuditById",value:function(n){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_SECTION WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_RECIVING_QUESTIONS WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_CHOICE WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_OPTION WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_RANGE WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_VALUE WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTION_FIELD_CHOICE WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_IMAGES_TB WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),this.databaseObj.executeSql("DELETE FROM AUDIT_ATTEMPTED_QUESTIONS_STANDATD_PREDEFINED WHERE ATTEMPTED_ID="+n,[]).then((function(n){console.log(n)})).catch((function(n){alert("error "+JSON.stringify(n))})),l.next=15,v(5e3);case 15:return console.log("done!"),l.abrupt("return",10);case 17:case"end":return l.stop()}}),l,this)})))}}]),n}(),M=e("iInd"),N=t.ob({encapsulation:0,styles:[[""]],data:{}});function P(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,0,"img",[["height","40"],["src","../../assets/red_lock_48.png"],["width","50"]],null,null,null,null,null))],null,null)}function y(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,0,"img",[["height","40"],["src","../../assets/refresh1.jpg"],["width","50"]],null,null,null,null,null))],null,null)}function x(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,25,"div",[],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,24,"ion-item",[],null,null,null,i.F,i.k)),t.pb(2,49152,null,0,o.F,[t.h,t.k,t.x],null,null),(n()(),t.qb(3,0,null,0,14,"table",[],null,null,null,null,null)),(n()(),t.qb(4,0,null,null,13,"tbody",[],null,null,null,null,null)),(n()(),t.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(n()(),t.qb(6,0,null,null,4,"td",[["align","center"],["rowspan","2"],["width","5%"]],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,P)),t.pb(8,16384,null,0,T.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,null,1,null,y)),t.pb(10,16384,null,0,T.i,[t.L,t.I],{ngIf:[0,"ngIf"]},null),(n()(),t.qb(11,0,null,null,2,"td",[["align","left"],["style","font-size:x-large;"],["width","90%"]],null,null,null,null,null)),(n()(),t.qb(12,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),t.Hb(13,null,[" Audit: "," ",""])),(n()(),t.qb(14,0,null,null,3,"tr",[],null,null,null,null,null)),(n()(),t.qb(15,0,null,null,2,"td",[["align","left"]],null,null,null,null,null)),(n()(),t.Hb(16,null,[" \xa0\xa0Audit Performed On: "," Total Marks: "," Marks Scored: "," "])),t.Db(0,T.n,[]),(n()(),t.qb(18,0,null,0,7,"ion-note",[["color","tertiary"],["slot","end"]],null,null,null,i.I,i.n)),t.pb(19,49152,null,0,o.T,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.qb(20,0,null,0,5,"ion-button",[["color","medium"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.OenAudit_Page_setting(n.context.$implicit.ATTEMPTED_ID,n.context.$implicit.AUDIT_ID,n.context.$implicit.STR_CODE)&&t),t}),i.w,i.b)),t.pb(21,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"]},null),(n()(),t.qb(22,0,null,0,3,"ion-checkbox",[["color","dark"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0;return"ionBlur"===l&&(u=!1!==t.Cb(n,25)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,25)._handleIonChange(e.target)&&u),u}),i.x,i.c)),t.Eb(5120,null,r.h,(function(n){return[n]}),[o.b]),t.pb(24,49152,null,0,o.p,[t.h,t.k,t.x],{color:[0,"color"]},null),t.pb(25,16384,null,0,o.b,[t.k],null,null)],(function(n,l){n(l,8,0,0===l.context.$implicit.MARKS_SCORED),n(l,10,0,l.context.$implicit.MARKS_SCORED>0),n(l,19,0,"tertiary"),n(l,21,0,"medium"),n(l,24,0,"dark")}),(function(n,l){n(l,13,0,l.context.$implicit.AUDIT_NAME,l.context.$implicit.STR_NAME),n(l,16,0,t.Ib(l,16,0,t.Cb(l,17).transform(l.context.$implicit.AUDIT_DT,0,10)),l.context.$implicit.AUDIT_POINTS,l.context.$implicit.MARKS_SCORED)}))}function k(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,13,"ion-header",[],null,null,null,i.D,i.i)),t.pb(1,49152,null,0,o.z,[t.h,t.k,t.x],null,null),(n()(),t.qb(2,0,null,0,11,"div",[["style","background-color: black; align-content: center;"]],null,null,null,null,null)),(n()(),t.qb(3,0,null,null,10,"table",[["style","margin-left: 10px; margin-top: 5px; margin-bottom: 2px;"]],null,null,null,null,null)),(n()(),t.qb(4,0,null,null,9,"tbody",[],null,null,null,null,null)),(n()(),t.qb(5,0,null,null,8,"tr",[],null,null,null,null,null)),(n()(),t.qb(6,0,null,null,2,"td",[],null,null,null,null,null)),(n()(),t.qb(7,0,null,null,1,"span",[["style","margin-top:20px; margin-left: 5px; margin-top: 1px;"]],null,null,null,null,null)),(n()(),t.qb(8,0,null,null,0,"img",[["height","35"],["src","../../assets/tablez.png"],["width","35"]],null,null,null,null,null)),(n()(),t.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t.Hb(-1,null,["\xa0"])),(n()(),t.qb(11,0,null,null,2,"td",[],null,null,null,null,null)),(n()(),t.qb(12,0,null,null,1,"span",[["style","color: white; margin-top: 1px;"]],null,null,null,null,null)),(n()(),t.Hb(-1,null,["Compleated Audit"])),(n()(),t.qb(14,0,null,null,3,"ion-content",[],null,null,null,i.z,i.e)),t.pb(15,49152,null,0,o.s,[t.h,t.k,t.x],null,null),(n()(),t.fb(16777216,null,0,1,null,x)),t.pb(17,278528,null,0,T.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(n()(),t.qb(18,0,null,null,35,"ion-footer",[["class","ion-no-border"]],null,null,null,i.B,i.g)),t.pb(19,49152,null,0,o.x,[t.h,t.k,t.x],null,null),(n()(),t.qb(20,0,null,0,33,"ion-grid",[],null,null,null,i.C,i.h)),t.pb(21,49152,null,0,o.y,[t.h,t.k,t.x],null,null),(n()(),t.qb(22,0,null,0,31,"ion-row",[],null,null,null,i.L,i.q)),t.pb(23,49152,null,0,o.eb,[t.h,t.k,t.x],null,null),(n()(),t.qb(24,0,null,0,5,"ion-col",[],null,null,null,i.y,i.d)),t.pb(25,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(n()(),t.qb(26,0,null,0,3,"div",[],null,null,null,null,null)),(n()(),t.qb(27,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.Add_Comment()&&t),t}),i.w,i.b)),t.pb(28,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Hb(-1,0,["Audit Findings"])),(n()(),t.qb(30,0,null,0,5,"ion-col",[],null,null,null,i.y,i.d)),t.pb(31,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(n()(),t.qb(32,0,null,0,3,"div",[],null,null,null,null,null)),(n()(),t.qb(33,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.openCam()&&t),t}),i.w,i.b)),t.pb(34,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Hb(-1,0,["Attach Image"])),(n()(),t.qb(36,0,null,0,5,"ion-col",[],null,null,null,i.y,i.d)),t.pb(37,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(n()(),t.qb(38,0,null,0,3,"div",[],null,null,null,null,null)),(n()(),t.qb(39,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.PushAudit()&&t),t}),i.w,i.b)),t.pb(40,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Hb(-1,0,["Push"])),(n()(),t.qb(42,0,null,0,5,"ion-col",[],null,null,null,i.y,i.d)),t.pb(43,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(n()(),t.qb(44,0,null,0,3,"div",[],null,null,null,null,null)),(n()(),t.qb(45,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.GoToAuditList()&&t),t}),i.w,i.b)),t.pb(46,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Hb(-1,0,["Open"])),(n()(),t.qb(48,0,null,0,5,"ion-col",[],null,null,null,i.y,i.d)),t.pb(49,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(n()(),t.qb(50,0,null,0,3,"div",[],null,null,null,null,null)),(n()(),t.qb(51,0,null,null,2,"ion-button",[["color","medium"],["expand","full"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.GoToDashboard()&&t),t}),i.w,i.b)),t.pb(52,49152,null,0,o.i,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Hb(-1,0,["Exit"]))],(function(n,l){n(l,17,0,l.component.AttemptedOpenAuditByUser),n(l,28,0,"medium","full"),n(l,34,0,"medium","full"),n(l,40,0,"medium","full"),n(l,46,0,"medium","full"),n(l,52,0,"medium","full")}),null)}var w=t.mb("app-close-audit",U,(function(n){return t.Jb(0,[(n()(),t.qb(0,0,null,null,1,"app-close-audit",[],null,null,null,k,N)),t.pb(1,114688,null,0,U,[o.Fb,m.a,p.a,M.m,_.a,o.Cb,f.a,D.a],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),R=function n(){_classCallCheck(this,n)},q=e("zjAK"),Q=function n(){_classCallCheck(this,n)};e.d(l,"CloseAuditPageModuleNgFactory",(function(){return L}));var L=t.nb(u,[],(function(n){return t.zb([t.Ab(512,t.j,t.Y,[[8,[h,A.a,E.a,w]],[3,t.j],t.v]),t.Ab(4608,T.k,T.j,[t.s,[2,T.r]]),t.Ab(4608,r.o,r.o,[]),t.Ab(4608,o.a,o.a,[t.x,t.g]),t.Ab(4608,o.Cb,o.Cb,[o.a,t.j,t.p]),t.Ab(4608,o.Gb,o.Gb,[o.a,t.j,t.p]),t.Ab(1073742336,T.b,T.b,[]),t.Ab(1073742336,r.n,r.n,[]),t.Ab(1073742336,r.g,r.g,[]),t.Ab(1073742336,o.zb,o.zb,[]),t.Ab(1073742336,R,R,[]),t.Ab(1073742336,q.a,q.a,[]),t.Ab(1073742336,M.n,M.n,[[2,M.s],[2,M.m]]),t.Ab(1073742336,Q,Q,[]),t.Ab(1073742336,u,u,[]),t.Ab(1024,M.k,(function(){return[[{path:"",component:U}]]}),[])])}))}}]);