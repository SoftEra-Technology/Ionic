function _defineProperties(T,t){for(var E=0;E<t.length;E++){var e=t[E];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(T,e.key,e)}}function _createClass(T,t,E){return t&&_defineProperties(T.prototype,t),E&&_defineProperties(T,E),T}function _classCallCheck(T,t){if(!(T instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+plB":function(T,t,E){"use strict";E.r(t);var e=E("8Y7J"),A=function T(){_classCallCheck(this,T)},n=E("pMnS"),D=E("MKJQ"),I=E("sZkV"),_=E("SVse"),S=E("6GXZ"),l=E("xoVG"),o=E("kwUn"),N=function(){function T(t,E,e,A,n,D){var I=this;_classCallCheck(this,T),this.userService=t,this.router=E,this.network=e,this.platform=A,this.sqlite=n,this.activatedRoute=D,this.database_name="AUDIT_DB.db",this.activatedRoute.queryParams.subscribe((function(T){console.log(JSON.parse(T.value)),I.Query_data=JSON.parse(T.value),console.log("list page"),console.log(I.Query_data.AttemptedId),I.fetchAttemptedAuditForStore(Number(I.Query_data.AuditId),I.Query_data.Storeid),I.fetchAttemptedSection(Number(I.Query_data.AttemptedId),Number(I.Query_data.AuditId))})),this.platform.ready().then((function(){I.createDB()})).catch((function(T){console.log(T)}))}return _createClass(T,[{key:"ngOnInit",value:function(){}},{key:"createDB",value:function(){var T=this;console.log("database created"),this.sqlite.create({name:this.database_name,location:"default"}).then((function(t){T.databaseObj=t})).catch((function(T){alert("error "+JSON.stringify(T))}))}},{key:"fetchAttemptedAuditForStore",value:function(T,t){var E=this;this.databaseObj.executeSql("SELECT * AUDIT_ATTEMPTED_TB where AUDIT_ID="+T+" AND STR_CODE='"+t+"' ORDER BY ATTEMPTED_ID DESC",[]).then((function(T){if(E.AttemptedAuditForStore=[],console.log(T),T.rows.length>0){for(var t=0;t<T.rows.length;t++)E.AttemptedAuditForStore.push(T.rows.item(t));console.log(E.AttemptedAuditForStore)}})).catch((function(T){console.log("error "+JSON.stringify(T))}))}},{key:"fetchAttemptedSection",value:function(T,t){var E=this;this.databaseObj.executeSql("SELECT B.SECTION_NAME AS P_SECTION_NAME,A.ATTEMPTED_ID,A.AUDIT_ID,A.SECTION_ID,A.PARENT_SECTION_ID,A.SECTION_NAME,A.SECTION_DESC,A.SECTION_ORDER,A.SECTION_PT,A.T_QUESTION_COUNT,((SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND AUDIT_ID=A.AUDIT_ID AND SECTION_ID=A.SECTION_ID AND QUESTION_STATUS<>'Open')+(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND AUDIT_ID=A.AUDIT_ID AND QUESTION_STATUS<>'Open' AND SECTION_ID IN(SELECT SECTION_ID FROM AUDIT_ATTEMPTED_SECTION WHERE PARENT_SECTION_ID=A.SECTION_ID))) AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND SECTION_ID=A.SECTION_ID AND IS_INCLUDED='Yes') AS SECTION_MARKS,(IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND SECTION_ID=A.SECTION_ID AND IS_INCLUDED='Yes'),0)+IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=A.ATTEMPTED_ID AND IS_INCLUDED='Yes' AND SECTION_ID IN(SELECT SECTION_ID FROM AUDIT_ATTEMPTED_SECTION WHERE PARENT_SECTION_ID=A.SECTION_ID)),0)) AS MARKS_SCORED FROM AUDIT_ATTEMPTED_SECTION A LEFT JOIN AUDIT_ATTEMPTED_SECTION B ON A.PARENT_SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID=B.ATTEMPTED_ID WHERE A.ATTEMPTED_ID="+T+" AND A.S_QUESTION_COUNT>0",[]).then((function(T){if(E.AttemptedSection=[],console.log(T),T.rows.length>0){for(var t=0;t<T.rows.length;t++)E.AttemptedSection.push(T.rows.item(t));console.log(E.AttemptedSection)}})).catch((function(T){console.log("error "+JSON.stringify(T))}))}},{key:"fetchAttemptedOpenAuditByUser",value:function(T){var t=this;this.databaseObj.executeSql("SELECT ATTEMPTED_ID,AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,AUDIT_STATUS,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID) AS TOTALQUESTION,(SELECT COUNT(*) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND AUDIT_ID=t.AUDIT_ID AND QUESTION_STATUS<>'Open') AS ATTEMPTQUESTION,(SELECT SUM(QUESTION_MARKS) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND IS_INCLUDED='Yes') AS AUDIT_POINTS,IFNULL((SELECT SUM(MARKS_SCORED) FROM AUDIT_ATTEMPTED_QUESTIONS WHERE ATTEMPTED_ID=t.ATTEMPTED_ID AND QUESTION_STATUS<>'Open'),0) MARKS_SCORED,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB t WHERE USER_ID='"+T+"' AND AUDIT_STATUS='Open'",[]).then((function(T){if(t.AttemptedOpenAuditByUser=[],console.log(T),T.rows.length>0){for(var E=0;E<T.rows.length;E++)t.AttemptedOpenAuditByUser.push(T.rows.item(E));return t.AttemptedOpenAuditByUser}})).catch((function(T){alert("error "+JSON.stringify(T))}))}},{key:"fetchAttemptedAuditBySQL",value:function(T,t){var E=this;this.databaseObj.executeSql("SELECT AUDIT_ID,AUDIT_NAME,STR_CODE,STR_NAME,USER_ID,STR_MANAGER,AUDIT_DT,UNIQUE_ID FROM AUDIT_ATTEMPTED_TB WHERE ATTEMPTED_ID="+T+" AND AUDIT_ID="+t,[]).then((function(T){if(E.AttemptedAuditBySQL=[],console.log(T),T.rows.length>0){for(var t=0;t<T.rows.length;t++)E.AttemptedAuditBySQL.push(T.rows.item(t));return E.AttemptedAuditBySQL}})).catch((function(T){alert("error "+JSON.stringify(T))}))}},{key:"fetchAttemptedSectionQuestionBySQL",value:function(T,t,E,e){var A=this;if("Audit"==T?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+t+" AND A.AUDIT_ID="+E,[]).then((function(T){if(A.AttemptedSectionQuestionBySQL=[],console.log(T),T.rows.length>0)for(var t=0;t<T.rows.length;t++)A.AttemptedSectionQuestionBySQL.push(T.rows.item(t))})).catch((function(T){alert("error "+JSON.stringify(T))})):"Section"==T?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+t+" AND A.AUDIT_ID="+E+" AND A.SECTION_ID="+e,[]).then((function(T){if(A.AttemptedSectionQuestionBySQL=[],console.log(T),T.rows.length>0)for(var t=0;t<T.rows.length;t++)A.AttemptedSectionQuestionBySQL.push(T.rows.item(t))})).catch((function(T){alert("error "+JSON.stringify(T))})):"Question"==T?this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+t+" AND A.AUDIT_ID="+E+" AND B.QUESTION_ID="+e,[]).then((function(T){if(A.AttemptedSectionQuestionBySQL=[],console.log(T),T.rows.length>0)for(var t=0;t<T.rows.length;t++)A.AttemptedSectionQuestionBySQL.push(T.rows.item(t))})).catch((function(T){alert("error "+JSON.stringify(T))})):this.databaseObj.executeSql("SELECT A.SECTION_ID,A.SECTION_NAME,A.SECTION_ORDER,B.QUESTION_ID,B.QUESTION_NAME,B.QUESTION_ORDER,B.QUESTION_TYPE_ID,B.QUESTION_TYPE,B.QUESTION_COMMENT,B.IMAGE_NAME FROM AUDIT_ATTEMPTED_SECTION A,AUDIT_ATTEMPTED_QUESTIONS B WHERE A.ATTEMPTED_ID=B.ATTEMPTED_ID AND A.AUDIT_ID=B.AUDIT_ID AND A.SECTION_ID=B.SECTION_ID AND A.ATTEMPTED_ID="+t+" AND A.AUDIT_ID="+E+" AND 1=2",[]).then((function(T){if(A.AttemptedSectionQuestionBySQL=[],console.log(T),T.rows.length>0)for(var t=0;t<T.rows.length;t++)A.AttemptedSectionQuestionBySQL.push(T.rows.item(t))})).catch((function(T){alert("error "+JSON.stringify(T))})),this.AttemptedSectionQuestionBySQL.length>0)return this.AttemptedSectionQuestionBySQL}}]),T}(),i=E("iInd"),u=e.ob({encapsulation:0,styles:[[""]],data:{}});function r(T){return e.Hb(0,[(T()(),e.qb(0,0,null,null,3,"div",[],null,null,null,null,null)),(T()(),e.qb(1,0,null,null,2,"div",[],null,null,null,null,null)),(T()(),e.qb(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(T()(),e.Gb(3,null,["Audit: ",""]))],null,(function(T,t){T(t,2,0,e.ub(1,"",t.context.$implicit.AUDIT_ID,"")),T(t,3,0,t.context.$implicit.AUDIT_NAME)}))}function O(T){return e.Hb(0,[(T()(),e.qb(0,0,null,null,6,"ion-header",[],null,null,null,D.s,D.f)),e.pb(1,49152,null,0,I.y,[e.h,e.k,e.x],null,null),(T()(),e.qb(2,0,null,0,4,"ion-toolbar",[],null,null,null,D.z,D.m)),e.pb(3,49152,null,0,I.wb,[e.h,e.k,e.x],null,null),(T()(),e.qb(4,0,null,0,2,"ion-title",[],null,null,null,D.y,D.l)),e.pb(5,49152,null,0,I.ub,[e.h,e.k,e.x],null,null),(T()(),e.Gb(-1,0,["ListAudit"])),(T()(),e.qb(7,0,null,null,3,"ion-content",[],null,null,null,D.p,D.c)),e.pb(8,49152,null,0,I.r,[e.h,e.k,e.x],null,null),(T()(),e.fb(16777216,null,0,1,null,r)),e.pb(10,278528,null,0,_.h,[e.L,e.I,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(T,t){T(t,10,0,t.component.AttemptedAuditForStore)}),null)}var s=e.mb("app-list-audit",N,(function(T){return e.Hb(0,[(T()(),e.qb(0,0,null,null,1,"app-list-audit",[],null,null,null,O,u)),e.pb(1,114688,null,0,N,[o.a,i.m,l.a,I.Cb,S.a,i.a],null,null)],(function(T,t){T(t,1,0)}),null)}),{},{},[]),a=E("s7LF"),c=function T(){_classCallCheck(this,T)};E.d(t,"ListAuditPageModuleNgFactory",(function(){return U}));var U=e.nb(A,[],(function(T){return e.zb([e.Ab(512,e.j,e.Y,[[8,[n.a,s]],[3,e.j],e.v]),e.Ab(4608,_.j,_.i,[e.s,[2,_.p]]),e.Ab(4608,a.n,a.n,[]),e.Ab(4608,I.a,I.a,[e.x,e.g]),e.Ab(4608,I.Ab,I.Ab,[I.a,e.j,e.p]),e.Ab(4608,I.Db,I.Db,[I.a,e.j,e.p]),e.Ab(1073742336,_.b,_.b,[]),e.Ab(1073742336,a.m,a.m,[]),e.Ab(1073742336,a.g,a.g,[]),e.Ab(1073742336,I.yb,I.yb,[]),e.Ab(1073742336,i.n,i.n,[[2,i.s],[2,i.m]]),e.Ab(1073742336,c,c,[]),e.Ab(1073742336,A,A,[]),e.Ab(1024,i.k,(function(){return[[{path:"",component:N}]]}),[])])}))}}]);